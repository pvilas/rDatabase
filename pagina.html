<!DOCTYPE html><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:java="http://xml.apache.org/xalan/java">
    <head>
        <title>Redis&nbsp;</title>
        <link href="/static/deister/img/faviconDeister.png?v=1545" rel="shortcut icon" />
        <link href="/static/assets/bootstrap/css/bootstrap.min.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/assets/dropzone/dropzone.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/assets/bootstrap/css/docs.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/assets/jquery-ui/jquery-ui.min.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/assets/prettify/skins/sunburst.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/assets/fontello/css/fontello.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/assets/dejavu/css/dejavu.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/assets/smartadmin/css/font-awesome.min.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/assets/treetable/css/jquery.treetable.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/assets/treetable/css/jquery.treetable.theme.default.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css" type="text/css" rel="stylesheet" />
        <link href="/static/assets/bootstrap-treeview/bootstrap-treeview.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/deister/css/deister-bootstrap.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/deister/css/deister-table-zui.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/deister/css/deister-custom.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/deister/css/deister-docs.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/deister/css/deister-smartadmin.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/deister/css/deister-treetable.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/deister/css/deister-treeview.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/deister/css/deister-viz.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/static/deister/css/deister-graph-sequence.css?v=1545" type="text/css" rel="stylesheet" />
        <link href="/docs/static/custom.css?v=1545" type="text/css" rel="stylesheet" />
    </head>
    <body onload="onDocumentLoad()" class="bs-body-full">
        <header role="banner" id="top" class="navbar navbar-expand-md navbar-dark navbar-inverse fixed-top">
            <div style="margin: 5px 0;" class="navbar-header ml-auto">
                <button style="padding: 4px 9px; font-size: 14px; border-color: #333333" aria-label="Toggle navigation" aria-expanded="false" aria-controls="#bs-navbar-second" data-target="#bs-navbar-second" data-toggle="collapse" type="button" class="navbar-toggler collapsed">
                    <span class="navbar-toggler-icon">&nbsp;</span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="bs-navbar-second">
                <div style="width:100%">
                    <ul class="nav navbar-nav">
                        <li class="nav-item overflow-x-ellipsis overflow-y-hidden" style=" font-size: 14px; margin: 10px 0px; color: #ccc; max-width:25%;">
                            <a class="nav-path-link path-links" style="text-decoration-line: none" target="_top" title="Databases" href="/content/Databases.30">Databases</a>
                        </li>
                        <li class="nav-item overflow-x-ellipsis overflow-y-hidden" style=" font-size: 14px; margin: 10px 0px; color: #ccc; max-width:25%;">
                            <a class="nav-path-link path-links" style="text-decoration-line: none" target="_top" title="Redis" href="/content/Databases.30/Redis">Redis</a>
                        </li>
                        <li class="nav-item overflow-x-ellipsis overflow-y-hidden" style=" font-size: 14px; margin: 10px 0px; color: #ccc; max-width:25%;">
                            <a class="nav-path-link path-links" style="text-decoration-line: none" target="_top" title="index" href="/content/Databases.30/Redis/index.xml">index</a>
                        </li>
                    </ul>
                </div>
                <div style="margin: 5px 0;" class="ml-auto">
                    <form class="form-inline text-right">
                        <div class="btn-group btn-group-sm">
                            <a target="_top" style="border: 0;" title="Previous document" data-placement="bottom" href="/content/Databases.30/MySQL.xml" id="previous-document" data-toggle2="tooltip" class="btn btn-light btn-secondary next-prev-Buttons">
                                <i class="fa fa-chevron-left">&nbsp;</i>
                            </a>
                            <a target="_top" style="border: 0;" title="Next document" data-placement="bottom" href="/content/IDE Tools.40" id="next-document" data-toggle2="tooltip" class="btn btn-light btn-secondary next-prev-Buttons">
                                <i class="fa fa-chevron-right">&nbsp;</i>
                            </a>
                            <button title="Copy url" data-placement="bottom" id="copy-path" data-toggle2="tooltip" class="btn btn-light btn-secondary" type="button">
                                <i class="fa fa-share-square-o">&nbsp;</i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </header>
        <div id="main-doc">
            <div id="doc-spin-background">&nbsp;</div>
            <i class="fa fa-refresh" id="doc-spin">&nbsp;</i>
            <div id="content" class="bs-docs-header " tabindex="-1">
                <div class="container">
                    <h1 style="padding-bottom: 4px;" class="overflow-x-ellipsis overflow-y-hidden">Redis</h1>
                </div>
            </div>
            <div class="container bs-docs-container">
                <div class="row">
                    <div style="margin-bottom: 100px" role="main" class="col-lg-9">
                        <div class="text-justify lead">
        <p>
            <a href="https://redis.io/" target="_blank">Redis</a> (Remote Dictionary Server) is an in-memory data structure project implementing a distributed, 
            in-memory key-value database with optional durability. <a href="https://redis.io/" target="_blank">Redis</a> supports different kinds of abstract 
            data structures, such as strings, lists, maps, sets, sorted sets, HyperLogLogs, bitmaps, streams, and spatial indexes. 
        </p>
        <p>
            You can read more in redis:
            
            <ul>
                <li>
                    <a href="https://www.tutorialspoint.com/redis/index.htm" target="_blank">Redis tutorial</a>
                </li>
                <li>
                    <a href="https://github.com/hirose31/redis-traffic-stats" target="_blank">Redis traffic stat using tcpdump</a>
                </li>
                <li>
                    <a href="https://dzone.com/articles/counting-distinct-users-in-real-time-with-redis-us" target="_blank">Counting Distinct Users In Real Time</a>
                </li>
            </ul>
        </p>
    </div>
                        <div class="row">
                            <h1 id="27be90ddb8e2f6069d75dccfa4c0946e" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">1&nbsp;Install</h1>
                        </div>
        <p>You can download source code and compile it using GCC and make.
        </p>
        
        <div class="row">
                            <h2 id="c2ca257c6ff4045afdd5d3d1c1e52128" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">1.1&nbsp;Install on MAC OS</h2>
                        </div>
             <p>
				 On a MAC you can use can use <code class="em ">brew</code> to get a pre-compiled version of <a href="https://redis.io/" target="_blank">Redis</a>:
			</p>
			<div id="example_1_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_1">Copy</span>
                            </div>
                            <pre id="example_1" class="
				code prettyprint
			">$ brew install redis</pre>
                        </div>
        
        
        <div class="row">
                            <h2 id="7cb9252939020c0d381d66a1a83f9eff" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">1.2&nbsp;Install on Linux</h2>
                        </div>
        	<p>Create user redis. This user will be used to start software in a non privileged mode.</p>
        	<div id="example_2_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_2">Copy</span>
                            </div>
                            <pre id="example_2" class="
				code prettyprint
			">adduser --home /home/redis --disabled-password</pre>
                        </div>
        	<p>Install required packages to compile and install <a href="https://redis.io/" target="_blank">Redis</a> and Extensions:</p>
        	<ul>
        		<li>On CentOS 7: <div id="example_3_wrapping" style="margin-top: -1px" class="collapse show">
                                    <div class="zero-clipboard">
                                        <span class="btn-clipboard" data-clipboard-target="#example_3">Copy</span>
                                    </div>
                                    <pre id="example_3" class="
				code prettyprint
			">yum install wget gcc make cmake git python2 python2-pip</pre>
                                </div>
        </li>
        		<li>On CentOS 8: <div id="example_4_wrapping" style="margin-top: -1px" class="collapse show">
                                    <div class="zero-clipboard">
                                        <span class="btn-clipboard" data-clipboard-target="#example_4">Copy</span>
                                    </div>
                                    <pre id="example_4" class="
				code prettyprint
			">dnf install wget gcc make cmake git python2 python2-pip</pre>
                                </div>
        </li>
        	</ul>
        	<p>In CentOS 8, default python is version 3, but <a href="https://redis.io/" target="_blank">Redis</a> require python2 to work. You'll ned
        	to link version 2 executables to default python names:</p>
        	<div id="example_5_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_5">Copy</span>
                            </div>
                            <pre id="example_5" class="
				code prettyprint
			">ln -s /usr/bin/pip2      /usr/bin/pip
ln -s /usr/bin/python2.7 /usr/bin/python</pre>
                        </div>
        	<p>Adquire redis user privileges and prepare folder for compilation and install</p>
        	<div id="example_6_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_6">Copy</span>
                            </div>
                            <pre id="example_6" class="
				code prettyprint
			"># su redis
$ cd $HOME
$ mkdir bin etc log src</pre>
                        </div>
        	<p>Download redis source code from <code class="em ">http://download.redis.io/releases/</code>
            </p>
        	<div id="example_7_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_7">Copy</span>
                            </div>
                            <pre id="example_7" class="
				code prettyprint
			">cd $HOME/src
wget http://download.redis.io/releases/redis-5.0.7.tar.gz</pre>
                        </div>
        	<p>Extract the source and compile it</p>
<div id="example_8_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_8">Copy</span>
                            </div>
                            <pre id="example_8" class="
				code prettyprint
			">tar xzvf redis-5.0.7.tar.gz
cd redis-5.0.7
make</pre>
                        </div>      

<div class="blockquote-box blockquote-danger clearfix">
                            <div class="square float-left">
                                <span class="fa  fa-times-circle  fa-lg" />
                            </div>
                            <div class="box-content">
                                <h4>redis version 6.0.0 and gcc version 4.8.5</h4>
    <p>Current <a href="https://redislabs.com/redis-enterprise/technology/redis-search/" target="_blank">RediSearch</a> extension needs redis version 6.0.0 or above. But redis 6.0.0 has a compiler error if it's compiled with <strong>gcc</strong> version 4.8.5 or lower.
    We can solve this if instead of <code class="em ">make</code>, we do:</p>
    <p>
                    <strong>yum install clang</strong>
                </p>
    <p>
                    <strong>CC=clang make</strong>
                </p>
</div>
                        </div>
            <p>
                 The binaries are now compiled are available in the src directory. Copy binaries and configuration files to the final redis destination:
            </p>
<div id="example_9_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_9">Copy</span>
                            </div>
                            <pre id="example_9" class="
				code prettyprint
			">cd $HOME/src/redis-5.0.7/src
cp redis-server redis-cli redis-benchmark redis-check-aof redis-check-rdb redis-sentinel mkreleasehdr.sh redis-trib.rb $HOME/bin
cd $HOME/src/redis-5.0.7
cp redis.conf sentinel.conf $HOME/etc</pre>
                        </div>
        
		<div class="row">
                            <h2 id="eb61e448cc3c555b4caa3a866f8ee5a9" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">1.3&nbsp;Configure operating system parameters</h2>
                        </div>
            <p>Configure kernel parameters for improbe REDIS performance. Edit <code class="em ">/etc/sysctl.conf</code> and add/change this parameters:</p>
<div id="example_10_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_10">Copy</span>
                            </div>
                            <pre id="example_10" class="
				code prettyprint
			"># Allow 65535 connections instead of 128 as before.
net.core.somaxconn=65535
# Redis Background save may fail under low memory condition if overcommit_memory is 0
vm.overcommit_memory=1</pre>
                        </div>
<p>
    Having Transparent Huge Pages (THP) support enabled in your kernel will create latency and memory usage issues with <a href="https://redis.io/" target="_blank">Redis</a>.
    To fix this issue you need to disable TPH at the operating system level by executing some commands when system starts.</p>
    <p>In order to disable them on system startup, you need to add Systemd Unit file with script that will disable THP.</p>

    <p>Create following file:</p>
<div id="example_11_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_11">Copy</span>
                            </div>
                            <pre id="example_11" class="
				code prettyprint
			">sudo vi /etc/systemd/system/disable-thp.service</pre>
                        </div>
	<p>and paste there following content:</p>
<div id="example_12_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_12">Copy</span>
                            </div>
                            <pre id="example_12" class="
				code prettyprint
			">[Unit]
Description=Disable Transparent Huge Pages (THP)

[Service]
Type=simple
ExecStart=/bin/sh -c "echo 'never' &gt; /sys/kernel/mm/transparent_hugepage/enabled &amp;&amp; echo 'never' &gt; /sys/kernel/mm/transparent_hugepage/defrag"

[Install]
WantedBy=multi-user.target</pre>
                        </div>
	<p>Save the file and reload SystemD daemon:</p>
<div id="example_13_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_13">Copy</span>
                            </div>
                            <pre id="example_13" class="
				code prettyprint
			">sudo systemctl daemon-reload</pre>
                        </div>

	<p>Than you can start the script and enable it on boot level:</p>
<div id="example_14_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_14">Copy</span>
                            </div>
                            <pre id="example_14" class="
				code prettyprint
			">sudo systemctl enable disable-thp --now</pre>
                        </div>
        

        <div class="row">
                            <h2 id="0068fe0b1d71de72e38f1ad4196d3537" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">1.4&nbsp;Install extensions</h2>
                        </div>
        	<p>Download and compilation of <strong>RediSearch</strong> extension is mandatory and should be done next.</p>
        	<p>Download and compilation of other extensions like <a href="https://redis.io/" target="_blank">Redis</a>-ML (machine learning extension) is optional.</p>
        	<p>Installation instructions of this extensions are documented at the end of this document in section <strong>Extensions</strong>.
        	You should go there now to install extensions before continue.</p>
        

	<div class="row">
                            <h1 id="d87c779cadc6bde102831b8223628ff9" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">2&nbsp;Configure</h1>
                        </div>
<p>Edit or Create an configuration file for <a href="https://redis.io/" target="_blank">Redis</a> on <code class="em ">/home/redis/etc/redis.conf</code>
            </p>
<div id="example_15_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_15">Copy</span>
                            </div>
                            <pre id="example_15" class="
				code prettyprint
			"># Load modules at startup. If the server is not able to load modules
# it will abort. It is possible to use multiple loadmodule directives.
loadmodule /home/redis/bin/redisearch.so

# By default, if no "bind" configuration directive is specified, Redis listens
# for connections from all the network interfaces available on the server.
# It is possible to listen to just one or multiple selected interfaces using
# the "bind" configuration directive, followed by one or more IP addresses.

# ~~~ WARNING ~~~ If the computer running Redis is directly exposed to the
# internet, binding to all the interfaces is dangerous and will expose the
# instance to everybody on the internet. So by default we uncomment the
# following bind directive, that will force Redis to listen only into
# the IPv4 loopback interface address (this means Redis will be able to
# accept connections only from clients running into the same computer it
# is running).
#
# IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES
# JUST COMMENT THE FOLLOWING LINE.
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
bind 0.0.0.0

# Protected mode is a layer of security protection, in order to avoid that
# Redis instances left open on the internet are accessed and exploited.
#
# When protected mode is on and if:
#
# 1) The server is not binding explicitly to a set of addresses using the
#    "bind" directive.
# 2) No password is configured.
#
# The server only accepts connections from clients connecting from the
# IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain
# sockets.
#
# By default protected mode is enabled. You should disable it only if
# you are sure you want clients from other hosts to connect to Redis
# even if no authentication is configured, nor a specific set of interfaces
# are explicitly listed using the "bind" directive.
protected-mode no

# Accept connections on the specified port, default is 6379 (IANA #815344).
# If port 0 is specified Redis will not listen on a TCP socket.
port 6379

# TCP listen() backlog.
#
# In high requests-per-second environments you need an high backlog in order
# to avoid slow clients connections issues. Note that the Linux kernel
# will silently truncate it to the value of /proc/sys/net/core/somaxconn so
# make sure to raise both the value of somaxconn and tcp_max_syn_backlog
# in order to get the desired effect.
tcp-backlog 511

# Close the connection after a client is idle for N seconds (0 to disable)
timeout 500000

# TCP keepalive.
#
# If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence
# of communication. This is useful for two reasons:
#
# 1) Detect dead peers.
# 2) Take the connection alive from the point of view of network
#    equipment in the middle.
#
# On Linux, the specified value (in seconds) is the period used to send ACKs.
# Note that to close the connection the double of the time is needed.
# On other kernels the period depends on the kernel configuration.
#
# A reasonable value for this option is 300 seconds, which is the new
# Redis default starting with Redis 3.2.1.
tcp-keepalive 300

# By default Redis does not run as a daemon. Use 'yes' if you need it.
# Note that Redis will write a pid file in /var/run/redis.pid when daemonized.
daemonize yes

# If you run Redis from upstart or systemd, Redis can interact with your
# supervision tree. Options:
#   supervised no      - no supervision interaction
#   supervised upstart - signal upstart by putting Redis into SIGSTOP mode
#   supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET
#   supervised auto    - detect upstart or systemd method based on
#                        UPSTART_JOB or NOTIFY_SOCKET environment variables
# Note: these supervision methods only signal "process is ready."
#       They do not enable continuous liveness pings back to your supervisor.
supervised no

# If a pid file is specified, Redis writes it where specified at startup
# and removes it at exit.
#
# When the server runs non daemonized, no pid file is created if none is
# specified in the configuration. When the server is daemonized, the pid file
# is used even if not specified, defaulting to "/var/run/redis.pid".
#
# Creating a pid file is best effort: if Redis is not able to create it
# nothing bad happens, the server will start and run normally.
pidfile "/home/redis/redis.pid"

# Specify the server verbosity level.
# This can be one of:
# debug (a lot of information, useful for development/testing)
# verbose (many rarely useful info, but not a mess like the debug level)
# notice (moderately verbose, what you want in production probably)
# warning (only very important / critical messages are logged)
loglevel notice

# Specify the log file name. Also the empty string can be used to force
# Redis to log on the standard output. Note that if you use standard
# output for logging but daemonize, logs will be sent to /dev/null
logfile "/home/redis/log/redis.log"

# Set the number of databases. The default database is DB 0, you can select
# a different one on a per-connection basis using SELECT &lt;dbid&gt; where
# dbid is a number between 0 and 'databases'-1
databases 16

# By default Redis shows an ASCII art logo only when started to log to the
# standard output and if the standard output is a TTY. Basically this means
# that normally a logo is displayed only in interactive sessions.
#
# However it is possible to force the pre-4.0 behavior and always show a
# ASCII art logo in startup logs by setting the following option to yes.
always-show-logo yes

################################ SNAPSHOTTING  ################################
#
# Save the DB on disk:
#
#   save &lt;seconds&gt; &lt;changes&gt;
#
#   Will save the DB if both the given number of seconds and the given
#   number of write operations against the DB occurred.
#
#   In the example below the behaviour will be to save:
#   after 900 sec (15 min) if at least 1 key changed
#   after 300 sec (5 min) if at least 10 keys changed
#   after 60 sec if at least 10000 keys changed
#
#   Note: you can disable saving completely by commenting out all "save" lines.
#
#   It is also possible to remove all the previously configured save
#   points by adding a save directive with a single empty string argument
#   like in the following example:
#
#   save ""

save 900 1
save 300 10
save 60 10000

# By default Redis will stop accepting writes if RDB snapshots are enabled
# (at least one save point) and the latest background save failed.
# This will make the user aware (in a hard way) that data is not persisting
# on disk properly, otherwise chances are that no one will notice and some
# disaster will happen.
#
# If the background saving process will start working again Redis will
# automatically allow writes again.
#
# However if you have setup your proper monitoring of the Redis server
# and persistence, you may want to disable this feature so that Redis will
# continue to work as usual even if there are problems with disk,
# permissions, and so forth.
stop-writes-on-bgsave-error yes

# Compress string objects using LZF when dump .rdb databases?
# For default that's set to 'yes' as it's almost always a win.
# If you want to save some CPU in the saving child set it to 'no' but
# the dataset will likely be bigger if you have compressible values or keys.
rdbcompression yes

# Since version 5 of RDB a CRC64 checksum is placed at the end of the file.
# This makes the format more resistant to corruption but there is a performance
# hit to pay (around 10%) when saving and loading RDB files, so you can disable it
# for maximum performances.
#
# RDB files created with checksum disabled have a checksum of zero that will
# tell the loading code to skip the check.
rdbchecksum yes

# The filename where to dump the DB
dbfilename "dump.rdb"

# The working directory.
#
# The DB will be written inside this directory, with the filename specified
# above using the 'dbfilename' configuration directive.
#
# The Append Only File will also be created inside this directory.
#
# Note that you must specify a directory here, not a file name.
dir "/home/redis"

################################# REPLICATION #################################

# Master-Replica replication. Use replicaof to make a Redis instance a copy of
# another Redis server. A few things to understand ASAP about Redis replication.
#
#   +------------------+      +---------------+
#   |      Master      | ---&gt; |    Replica    |
#   | (receive writes) |      |  (exact copy) |
#   +------------------+      +---------------+
#
# 1) Redis replication is asynchronous, but you can configure a master to
#    stop accepting writes if it appears to be not connected with at least
#    a given number of replicas.
# 2) Redis replicas are able to perform a partial resynchronization with the
#    master if the replication link is lost for a relatively small amount of
#    time. You may want to configure the replication backlog size (see the next
#    sections of this file) with a sensible value depending on your needs.
# 3) Replication is automatic and does not need user intervention. After a
#    network partition replicas automatically try to reconnect to masters
#    and resynchronize with them.
#
# replicaof &lt;masterip&gt; &lt;masterport&gt;

# If the master is password protected (using the "requirepass" configuration
# directive below) it is possible to tell the replica to authenticate before
# starting the replication synchronization process, otherwise the master will
# refuse the replica request.
#
# masterauth &lt;master-password&gt;

# When a replica loses its connection with the master, or when the replication
# is still in progress, the replica can act in two different ways:
#
# 1) if replica-serve-stale-data is set to 'yes' (the default) the replica will
#    still reply to client requests, possibly with out of date data, or the
#    data set may just be empty if this is the first synchronization.
#
# 2) if replica-serve-stale-data is set to 'no' the replica will reply with
#    an error "SYNC with master in progress" to all the kind of commands
#    but to INFO, replicaOF, AUTH, PING, SHUTDOWN, REPLCONF, ROLE, CONFIG,
#    SUBSCRIBE, UNSUBSCRIBE, PSUBSCRIBE, PUNSUBSCRIBE, PUBLISH, PUBSUB,
#    COMMAND, POST, HOST: and LATENCY.
#
replica-serve-stale-data yes

# You can configure a replica instance to accept writes or not. Writing against
# a replica instance may be useful to store some ephemeral data (because data
# written on a replica will be easily deleted after resync with the master) but
# may also cause problems if clients are writing to it because of a
# misconfiguration.
#
# Since Redis 2.6 by default replicas are read-only.
#
# Note: read only replicas are not designed to be exposed to untrusted clients
# on the internet. It's just a protection layer against misuse of the instance.
# Still a read only replica exports by default all the administrative commands
# such as CONFIG, DEBUG, and so forth. To a limited extent you can improve
# security of read only replicas using 'rename-command' to shadow all the
# administrative / dangerous commands.
replica-read-only yes

# Replication SYNC strategy: disk or socket.
#
# -------------------------------------------------------
# WARNING: DISKLESS REPLICATION IS EXPERIMENTAL CURRENTLY
# -------------------------------------------------------
#
# New replicas and reconnecting replicas that are not able to continue the replication
# process just receiving differences, need to do what is called a "full
# synchronization". An RDB file is transmitted from the master to the replicas.
# The transmission can happen in two different ways:
#
# 1) Disk-backed: The Redis master creates a new process that writes the RDB
#                 file on disk. Later the file is transferred by the parent
#                 process to the replicas incrementally.
# 2) Diskless: The Redis master creates a new process that directly writes the
#              RDB file to replica sockets, without touching the disk at all.
#
# With disk-backed replication, while the RDB file is generated, more replicas
# can be queued and served with the RDB file as soon as the current child producing
# the RDB file finishes its work. With diskless replication instead once
# the transfer starts, new replicas arriving will be queued and a new transfer
# will start when the current one terminates.
#
# When diskless replication is used, the master waits a configurable amount of
# time (in seconds) before starting the transfer in the hope that multiple replicas
# will arrive and the transfer can be parallelized.
#
# With slow disks and fast (large bandwidth) networks, diskless replication
# works better.
repl-diskless-sync no

# When diskless replication is enabled, it is possible to configure the delay
# the server waits in order to spawn the child that transfers the RDB via socket
# to the replicas.
#
# This is important since once the transfer starts, it is not possible to serve
# new replicas arriving, that will be queued for the next RDB transfer, so the server
# waits a delay in order to let more replicas arrive.
#
# The delay is specified in seconds, and by default is 5 seconds. To disable
# it entirely just set it to 0 seconds and the transfer will start ASAP.
repl-diskless-sync-delay 5

# Disable TCP_NODELAY on the replica socket after SYNC?
#
# If you select "yes" Redis will use a smaller number of TCP packets and
# less bandwidth to send data to replicas. But this can add a delay for
# the data to appear on the replica side, up to 40 milliseconds with
# Linux kernels using a default configuration.
#
# If you select "no" the delay for data to appear on the replica side will
# be reduced but more bandwidth will be used for replication.
#
# By default we optimize for low latency, but in very high traffic conditions
# or when the master and replicas are many hops away, turning this to "yes" may
# be a good idea.
repl-disable-tcp-nodelay no

# The replica priority is an integer number published by Redis in the INFO output.
# It is used by Redis Sentinel in order to select a replica to promote into a
# master if the master is no longer working correctly.
#
# A replica with a low priority number is considered better for promotion, so
# for instance if there are three replicas with priority 10, 100, 25 Sentinel will
# pick the one with priority 10, that is the lowest.
#
# However a special priority of 0 marks the replica as not able to perform the
# role of master, so a replica with priority of 0 will never be selected by
# Redis Sentinel for promotion.
#
# By default the priority is 100.
replica-priority 100

############################# LAZY FREEING ####################################

# Redis has two primitives to delete keys. One is called DEL and is a blocking
# deletion of the object. It means that the server stops processing new commands
# in order to reclaim all the memory associated with an object in a synchronous
# way. If the key deleted is associated with a small object, the time needed
# in order to execute the DEL command is very small and comparable to most other
# O(1) or O(log_N) commands in Redis. However if the key is associated with an
# aggregated value containing millions of elements, the server can block for
# a long time (even seconds) in order to complete the operation.
#
# For the above reasons Redis also offers non blocking deletion primitives
# such as UNLINK (non blocking DEL) and the ASYNC option of FLUSHALL and
# FLUSHDB commands, in order to reclaim memory in background. Those commands
# are executed in constant time. Another thread will incrementally free the
# object in the background as fast as possible.
#
# DEL, UNLINK and ASYNC option of FLUSHALL and FLUSHDB are user-controlled.
# It's up to the design of the application to understand when it is a good
# idea to use one or the other. However the Redis server sometimes has to
# delete keys or flush the whole database as a side effect of other operations.
# Specifically Redis deletes objects independently of a user call in the
# following scenarios:
#
# 1) On eviction, because of the maxmemory and maxmemory policy configurations,
#    in order to make room for new data, without going over the specified
#    memory limit.
# 2) Because of expire: when a key with an associated time to live (see the
#    EXPIRE command) must be deleted from memory.
# 3) Because of a side effect of a command that stores data on a key that may
#    already exist. For example the RENAME command may delete the old key
#    content when it is replaced with another one. Similarly SUNIONSTORE
#    or SORT with STORE option may delete existing keys. The SET command
#    itself removes any old content of the specified key in order to replace
#    it with the specified string.
# 4) During replication, when a replica performs a full resynchronization with
#    its master, the content of the whole database is removed in order to
#    load the RDB file just transferred.
#
# In all the above cases the default is to delete objects in a blocking way,
# like if DEL was called. However you can configure each case specifically
# in order to instead release memory in a non-blocking way like if UNLINK
# was called, using the following configuration directives:

lazyfree-lazy-eviction no
lazyfree-lazy-expire no
lazyfree-lazy-server-del no
replica-lazy-flush no

############################## APPEND ONLY MODE ###############################

# By default Redis asynchronously dumps the dataset on disk. This mode is
# good enough in many applications, but an issue with the Redis process or
# a power outage may result into a few minutes of writes lost (depending on
# the configured save points).
#
# The Append Only File is an alternative persistence mode that provides
# much better durability. For instance using the default data fsync policy
# (see later in the config file) Redis can lose just one second of writes in a
# dramatic event like a server power outage, or a single write if something
# wrong with the Redis process itself happens, but the operating system is
# still running correctly.
#
# AOF and RDB persistence can be enabled at the same time without problems.
# If the AOF is enabled on startup Redis will load the AOF, that is the file
# with the better durability guarantees.
#
# Please check http://redis.io/topics/persistence for more information.

appendonly no

# The name of the append only file (default: "appendonly.aof")

appendfilename "appendonly.aof"

# The fsync() call tells the Operating System to actually write data on disk
# instead of waiting for more data in the output buffer. Some OS will really flush
# data on disk, some other OS will just try to do it ASAP.
#
# Redis supports three different modes:
#
# no: don't fsync, just let the OS flush the data when it wants. Faster.
# always: fsync after every write to the append only log. Slow, Safest.
# everysec: fsync only one time every second. Compromise.
#
# The default is "everysec", as that's usually the right compromise between
# speed and data safety. It's up to you to understand if you can relax this to
# "no" that will let the operating system flush the output buffer when
# it wants, for better performances (but if you can live with the idea of
# some data loss consider the default persistence mode that's snapshotting),
# or on the contrary, use "always" that's very slow but a bit safer than
# everysec.
#
# More details please check the following article:
# http://antirez.com/post/redis-persistence-demystified.html
#
# If unsure, use "everysec".

appendfsync everysec

# When the AOF fsync policy is set to always or everysec, and a background
# saving process (a background save or AOF log background rewriting) is
# performing a lot of I/O against the disk, in some Linux configurations
# Redis may block too long on the fsync() call. Note that there is no fix for
# this currently, as even performing fsync in a different thread will block
# our synchronous write(2) call.
#
# In order to mitigate this problem it's possible to use the following option
# that will prevent fsync() from being called in the main process while a
# BGSAVE or BGREWRITEAOF is in progress.
#
# This means that while another child is saving, the durability of Redis is
# the same as "appendfsync none". In practical terms, this means that it is
# possible to lose up to 30 seconds of log in the worst scenario (with the
# default Linux settings).
#
# If you have latency problems turn this to "yes". Otherwise leave it as
# "no" that is the safest pick from the point of view of durability.

no-appendfsync-on-rewrite no

# Automatic rewrite of the append only file.
# Redis is able to automatically rewrite the log file implicitly calling
# BGREWRITEAOF when the AOF log size grows by the specified percentage.
#
# This is how it works: Redis remembers the size of the AOF file after the
# latest rewrite (if no rewrite has happened since the restart, the size of
# the AOF at startup is used).
#
# This base size is compared to the current size. If the current size is
# bigger than the specified percentage, the rewrite is triggered. Also
# you need to specify a minimal size for the AOF file to be rewritten, this
# is useful to avoid rewriting the AOF file even if the percentage increase
# is reached but it is still pretty small.
#
# Specify a percentage of zero in order to disable the automatic AOF
# rewrite feature.

auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# An AOF file may be found to be truncated at the end during the Redis
# startup process, when the AOF data gets loaded back into memory.
# This may happen when the system where Redis is running
# crashes, especially when an ext4 filesystem is mounted without the
# data=ordered option (however this can't happen when Redis itself
# crashes or aborts but the operating system still works correctly).
#
# Redis can either exit with an error when this happens, or load as much
# data as possible (the default now) and start if the AOF file is found
# to be truncated at the end. The following option controls this behavior.
#
# If aof-load-truncated is set to yes, a truncated AOF file is loaded and
# the Redis server starts emitting a log to inform the user of the event.
# Otherwise if the option is set to no, the server aborts with an error
# and refuses to start. When the option is set to no, the user requires
# to fix the AOF file using the "redis-check-aof" utility before to restart
# the server.
#
# Note that if the AOF file will be found to be corrupted in the middle
# the server will still exit with an error. This option only applies when
# Redis will try to read more data from the AOF file but not enough bytes
# will be found.
aof-load-truncated yes

# When rewriting the AOF file, Redis is able to use an RDB preamble in the
# AOF file for faster rewrites and recoveries. When this option is turned
# on the rewritten AOF file is composed of two different stanzas:
#
#   [RDB file][AOF tail]
#
# When loading Redis recognizes that the AOF file starts with the "REDIS"
# string and loads the prefixed RDB file, and continues loading the AOF
# tail.
aof-use-rdb-preamble yes

################################ LUA SCRIPTING  ###############################

# Max execution time of a Lua script in milliseconds.
#
# If the maximum execution time is reached Redis will log that a script is
# still in execution after the maximum allowed time and will start to
# reply to queries with an error.
#
# When a long running script exceeds the maximum execution time only the
# SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be
# used to stop a script that did not yet called write commands. The second
# is the only way to shut down the server in the case a write command was
# already issued by the script but the user doesn't want to wait for the natural
# termination of the script.
#
# Set it to 0 or a negative value for unlimited execution without warnings.
lua-time-limit 5000

################################## SLOW LOG ###################################

# The Redis Slow Log is a system to log queries that exceeded a specified
# execution time. The execution time does not include the I/O operations
# like talking with the client, sending the reply and so forth,
# but just the time needed to actually execute the command (this is the only
# stage of command execution where the thread is blocked and can not serve
# other requests in the meantime).
#
# You can configure the slow log with two parameters: one tells Redis
# what is the execution time, in microseconds, to exceed in order for the
# command to get logged, and the other parameter is the length of the
# slow log. When a new command is logged the oldest one is removed from the
# queue of logged commands.

# The following time is expressed in microseconds, so 1000000 is equivalent
# to one second. Note that a negative number disables the slow log, while
# a value of zero forces the logging of every command.
slowlog-log-slower-than 10000

# There is no limit to this length. Just be aware that it will consume memory.
# You can reclaim memory used by the slow log with SLOWLOG RESET.
slowlog-max-len 128

################################ LATENCY MONITOR ##############################

# The Redis latency monitoring subsystem samples different operations
# at runtime in order to collect data related to possible sources of
# latency of a Redis instance.
#
# Via the LATENCY command this information is available to the user that can
# print graphs and obtain reports.
#
# The system only logs operations that were performed in a time equal or
# greater than the amount of milliseconds specified via the
# latency-monitor-threshold configuration directive. When its value is set
# to zero, the latency monitor is turned off.
#
# By default latency monitoring is disabled since it is mostly not needed
# if you don't have latency issues, and collecting data has a performance
# impact, that while very small, can be measured under big load. Latency
# monitoring can easily be enabled at runtime using the command
# "CONFIG SET latency-monitor-threshold &lt;milliseconds&gt;" if needed.
latency-monitor-threshold 0

############################### ADVANCED CONFIG ###############################

# Hashes are encoded using a memory efficient data structure when they have a
# small number of entries, and the biggest entry does not exceed a given
# threshold. These thresholds can be configured using the following directives.
hash-max-ziplist-entries 512
hash-max-ziplist-value 64

# Lists are also encoded in a special way to save a lot of space.
# The number of entries allowed per internal list node can be specified
# as a fixed maximum size or a maximum number of elements.
# For a fixed maximum size, use -5 through -1, meaning:
# -5: max size: 64 Kb  &lt;-- not recommended for normal workloads
# -4: max size: 32 Kb  &lt;-- not recommended
# -3: max size: 16 Kb  &lt;-- probably not recommended
# -2: max size: 8 Kb   &lt;-- good
# -1: max size: 4 Kb   &lt;-- good
# Positive numbers mean store up to _exactly_ that number of elements
# per list node.
# The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),
# but if your use case is unique, adjust the settings as necessary.
list-max-ziplist-size -2

# Lists may also be compressed.
# Compress depth is the number of quicklist ziplist nodes from *each* side of
# the list to *exclude* from compression.  The head and tail of the list
# are always uncompressed for fast push/pop operations.  Settings are:
# 0: disable all list compression
# 1: depth 1 means "don't start compressing until after 1 node into the list,
#    going from either the head or tail"
#    So: [head]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[tail]
#    [head], [tail] will always be uncompressed; inner nodes will compress.
# 2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[tail]
#    2 here means: don't compress head or head-&gt;next or tail-&gt;prev or tail,
#    but compress all nodes between them.
# 3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]
# etc.
list-compress-depth 0

# Sets have a special encoding in just one case: when a set is composed
# of just strings that happen to be integers in radix 10 in the range
# of 64 bit signed integers.
# The following configuration setting sets the limit in the size of the
# set in order to use this special memory saving encoding.
set-max-intset-entries 512

# Similarly to hashes and lists, sorted sets are also specially encoded in
# order to save a lot of space. This encoding is only used when the length and
# elements of a sorted set are below the following limits:
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

# HyperLogLog sparse representation bytes limit. The limit includes the
# 16 bytes header. When an HyperLogLog using the sparse representation crosses
# this limit, it is converted into the dense representation.
#
# A value greater than 16000 is totally useless, since at that point the
# dense representation is more memory efficient.
#
# The suggested value is ~ 3000 in order to have the benefits of
# the space efficient encoding without slowing down too much PFADD,
# which is O(N) with the sparse encoding. The value can be raised to
# ~ 10000 when CPU is not a concern, but space is, and the data set is
# composed of many HyperLogLogs with cardinality in the 0 - 15000 range.
hll-sparse-max-bytes 3000

# Streams macro node max size / items. The stream data structure is a radix
# tree of big nodes that encode multiple items inside. Using this configuration
# it is possible to configure how big a single node can be in bytes, and the
# maximum number of items it may contain before switching to a new node when
# appending new stream entries. If any of the following settings are set to
# zero, the limit is ignored, so for instance it is possible to set just a
# max entires limit by setting max-bytes to 0 and max-entries to the desired
# value.
stream-node-max-bytes 4096
stream-node-max-entries 100

# Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in
# order to help rehashing the main Redis hash table (the one mapping top-level
# keys to values). The hash table implementation Redis uses (see dict.c)
# performs a lazy rehashing: the more operation you run into a hash table
# that is rehashing, the more rehashing "steps" are performed, so if the
# server is idle the rehashing is never complete and some more memory is used
# by the hash table.
#
# The default is to use this millisecond 10 times every second in order to
# actively rehash the main dictionaries, freeing memory when possible.
#
# If unsure:
# use "activerehashing no" if you have hard latency requirements and it is
# not a good thing in your environment that Redis can reply from time to time
# to queries with 2 milliseconds delay.
#
# use "activerehashing yes" if you don't have such hard requirements but
# want to free memory asap when possible.
activerehashing yes

# The client output buffer limits can be used to force disconnection of clients
# that are not reading data from the server fast enough for some reason (a
# common reason is that a Pub/Sub client can't consume messages as fast as the
# publisher can produce them).
#
# The limit can be set differently for the three different classes of clients:
#
# normal -&gt; normal clients including MONITOR clients
# replica  -&gt; replica clients
# pubsub -&gt; clients subscribed to at least one pubsub channel or pattern
#
# The syntax of every client-output-buffer-limit directive is the following:
#
# client-output-buffer-limit &lt;class&gt; &lt;hard limit&gt; &lt;soft limit&gt; &lt;soft seconds&gt;
#
# A client is immediately disconnected once the hard limit is reached, or if
# the soft limit is reached and remains reached for the specified number of
# seconds (continuously).
# So for instance if the hard limit is 32 megabytes and the soft limit is
# 16 megabytes / 10 seconds, the client will get disconnected immediately
# if the size of the output buffers reach 32 megabytes, but will also get
# disconnected if the client reaches 16 megabytes and continuously overcomes
# the limit for 10 seconds.
#
# By default normal clients are not limited because they don't receive data
# without asking (in a push way), but just after a request, so only
# asynchronous clients may create a scenario where data is requested faster
# than it can read.
#
# Instead there is a default limit for pubsub and replica clients, since
# subscribers and replicas receive data in a push fashion.
#
# Both the hard or the soft limit can be disabled by setting them to zero.
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit replica 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

# Redis calls an internal function to perform many background tasks, like
# closing connections of clients in timeout, purging expired keys that are
# never requested, and so forth.
#
# Not all tasks are performed with the same frequency, but Redis checks for
# tasks to perform according to the specified "hz" value.
#
# By default "hz" is set to 10. Raising the value will use more CPU when
# Redis is idle, but at the same time will make Redis more responsive when
# there are many keys expiring at the same time, and timeouts may be
# handled with more precision.
#
# The range is between 1 and 500, however a value over 100 is usually not
# a good idea. Most users should use the default of 10 and raise this up to
# 100 only in environments where very low latency is required.
hz 10

# Normally it is useful to have an HZ value which is proportional to the
# number of clients connected. This is useful in order, for instance, to
# avoid too many clients are processed for each background task invocation
# in order to avoid latency spikes.
#
# Since the default HZ value by default is conservatively set to 10, Redis
# offers, and enables by default, the ability to use an adaptive HZ value
# which will temporary raise when there are many connected clients.
#
# When dynamic HZ is enabled, the actual configured HZ will be used as
# as a baseline, but multiples of the configured HZ value will be actually
# used as needed once more clients are connected. In this way an idle
# instance will use very little CPU time while a busy instance will be
# more responsive.
dynamic-hz yes

# When a child rewrites the AOF file, if the following option is enabled
# the file will be fsync-ed every 32 MB of data generated. This is useful
# in order to commit the file to the disk more incrementally and avoid
# big latency spikes.
aof-rewrite-incremental-fsync yes

# When redis saves RDB file, if the following option is enabled
# the file will be fsync-ed every 32 MB of data generated. This is useful
# in order to commit the file to the disk more incrementally and avoid
# big latency spikes.
rdb-save-incremental-fsync yes</pre>
                        </div>
<p>Create an auto-rotate log definition on <code class="em ">/etc/logrotate.d/redis-server</code>
            </p>
<div id="example_16_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_16">Copy</span>
                            </div>
                            <pre id="example_16" class="
				code prettyprint
			">/home/redis/log/redis.log {
    daily
    rotate 14
    copytruncate
    delaycompress
    compress
    notifempty
    missingok
}</pre>
                        </div>
    <div class="row">
                            <h1 id="4153fce22b0312dd9bc476bd68528d0d" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">3&nbsp;Start and Stop Redis</h1>
                        </div>
        <div class="row">
                            <h2 id="d54a42fcdc9deea613e0cd255a655d5c" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">3.1&nbsp;Command Line Start and Stop</h2>
                        </div>
        	<p>
                You can start <a href="https://redis.io/" target="_blank">Redis</a> from command line to test it by executing the program binary:
            </p>
            <div id="example_17_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_17">Copy</span>
                            </div>
                            <p class="content-title">Start Redis server using configuration file.</p>
                            <pre id="example_17" class="
				code prettyprint
			">$ redis-server /home/redis/etc/redis.conf

or simply

$ redis-server</pre>
                        </div>
            <p>
                To stop <a href="https://redis.io/" target="_blank">Redis</a> properly, connect to node instance and use shutdown command:
            </p>
<div id="example_18_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_18">Copy</span>
                            </div>
                            <pre id="example_18" class="
				code prettyprint
			">$ redis-cli shutdown</pre>
                        </div>  
        
        <div class="row">
                            <h2 id="fd06adb838367f0fcb97fa65ac31216a" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">3.2&nbsp;Start Redis as a service in MacOS</h2>
                        </div>
<div id="example_19_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_19">Copy</span>
                            </div>
                            <p class="content-title">Launch Redis on computer starts.</p>
                            <pre id="example_19" class="
				code prettyprint
			">$ ln -sfv /usr/local/opt/redis/*.plist ~/Library/LaunchAgents</pre>
                        </div>
        
        <a class="anchor" name="_anchor_start_redis_as_service">&nbsp;</a>
                        <div class="row">
                            <h2 id="6f4e35af64caf1a09dbf1563bdc1dde0" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">3.3&nbsp;Start Redis as a service in Linux</h2>
                        </div>
            <p>Create systemd service file on <code class="em ">/etc/systemd/system/redis-server.service</code>
            </p>
<div id="example_20_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_20">Copy</span>
                            </div>
                            <pre id="example_20" class="
				code prettyprint
			">[Unit]
Description=Redis Server
After=network.target

[Service]
Type=forking
LimitNOFILE=64000
PIDFile=/home/redis/redis.pid
User=redis
PermissionsStartOnly=true
ExecStartPre=-/bin/sh -c 'echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled'
ExecStartPre=/bin/su redis -c "/bin/mkdir -p /home/redis/log"
ExecStart=/home/redis/bin/redis-server /home/redis/etc/redis.conf
ExecStop=/bin/kill -15 $MAINPID
Restart=on-failure

[Install]
WantedBy=multi-user.target</pre>
                        </div>
<p>Then you can use systemd to run <a href="https://redis.io/" target="_blank">Redis</a> as a managed service, e.g.</p>
<div id="example_21_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_21">Copy</span>
                            </div>
                            <pre id="example_21" class="
				code prettyprint
			">systemctl daemon-reload
systemctl enable redis-server --now</pre>
                        </div>
        
    <div class="row">
                            <h1 id="c50c8440527dd7df6f0603318e5f4dbd" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">4&nbsp;Test Redis</h1>
                        </div>
            <p>
            Once installed you can check redis by using <code class="em ">redis-cli</code>
        </p>
<div id="example_22_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_22">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_22" class="
				code prettyprint
			">$ redis-cli ping</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">PONG</pre>
                            </figure>
                        </div>   
<div class="row">
                            <h1 id="909ee5ebb4180dc87981ffaf057d2767" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">5&nbsp;Securing Redis</h1>
                        </div>
		<p>
			By default <a href="https://redis.io/" target="_blank">Redis</a> binds to all the interfaces and has no authentication at all. If you use <a href="https://redis.io/" target="_blank">Redis</a> in a very controlled environment, separated from the external internet and in general from attackers, that's fine. However if <a href="https://redis.io/" target="_blank">Redis</a> without any hardening is exposed to the internet, it is a big security concern. If you are not 100% sure your environment is secured properly, please check the following steps in order to make <a href="https://redis.io/" target="_blank">Redis</a> more secure, which are enlisted in order of increased security.
		</p>
		<div class="bs-callout bs-callout-warning text-justify">
			Make sure the port <a href="https://redis.io/" target="_blank">Redis</a> uses to listen for connections (by default <strong>6379</strong> and additionally <strong>16379</strong> if you run <a href="https://redis.io/" target="_blank">Redis</a> in cluster mode, plus <strong>26379</strong> for Sentinel) is firewalled, so that it is not possible to contact <a href="https://redis.io/" target="_blank">Redis</a> from the outside world.
			Use a configuration file where the bind directive is set in order to guarantee that <a href="https://redis.io/" target="_blank">Redis</a> listens on only the network interfaces you are using. For example only the loopback interface (127.0.0.1) if you are accessing <a href="https://redis.io/" target="_blank">Redis</a> just locally from the same computer, and so forth.
			Use the requirepass option in order to add an additional layer of security so that clients will require to authenticate using the AUTH command.
			Use spiped or another SSL tunneling software in order to encrypt traffic between <a href="https://redis.io/" target="_blank">Redis</a> servers and <a href="https://redis.io/" target="_blank">Redis</a> clients if your environment requires encryption.
			Note that a <a href="https://redis.io/" target="_blank">Redis</a> exposed to the internet without any security is very simple to exploit, so make sure you understand the above and apply at least a firewalling layer. After the firewalling is in place, try to connect with <a href="https://redis.io/topics/rediscli" target="_blank">redis-cli</a> from an external host in order to prove yourself the instance is actually not reachable.                
		</div>
	<div class="row">
                            <h1 id="e1fa3552e2b781214b5b8433eea3e147" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">6&nbsp;Persistence</h1>
                        </div>
    <p>
    <a href="https://redis.io/" target="_blank">Redis</a> its specificity is to store all the data in RAM to prevent slow disk accesses. 
    The con of such way of operating is that the RAM is volatile and you might suffer data loss in case of an incident on the <a href="https://redis.io/" target="_blank">Redis</a> process or its host. 
    </p>
    <p>
        <a href="https://redis.io/" target="_blank">Redis</a> provides a different range of persistence options:
        <ul>
            <li>The <code class="em ">RDB</code> persistence performs point-in-time snapshots of your dataset at specified intervals.</li>
            <li>The <code class="em ">AOF</code> persistence logs every write operation received by the server, that will be played again at server startup, reconstructing the original dataset. Commands are logged using the same format as the <a href="https://redis.io/" target="_blank">Redis</a> protocol itself, in an append-only fashion. <a href="https://redis.io/" target="_blank">Redis</a> is able to rewrite the log in the background when it gets too big.</li>
        </ul>
        If you wish, you can disable persistence completely, if you want your data to just exist as long as the server is running.
        It is possible to combine both <code class="em ">AOF</code> and <code class="em ">RDB</code> in the same instance. 
        Notice that, in this case, when <a href="https://redis.io/" target="_blank">Redis</a> restarts the <code class="em ">AOF</code> file will be used to reconstruct the original dataset since it is guaranteed to be the most complete.
    </p>
    <div class="row">
                            <h2 id="3dcbfdb3789da9430af051c59c3ad5db" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">6.1&nbsp;Snapshot persistence aka RDB</h2>
                        </div>
        <p>
        The first, and default mode, is the snapshot mode (also called <code class="em ">RDB</code>). It provides a compromise between performance and persistence. 
        Data are saved as .rdb files to disk periodically, according to a defined number of write operations, asynchronously. 
        It means that in the scope of an incident, recent data are lost. Here are some saving rules:
        <ul>
            <li>Every 900 seconds if at least 1 write operation has occurred</li>
            <li>Every 300 seconds if at least 10 write operations have occurred</li>
            <li>Every 60 seconds if at least 10000 write operations have occurred</li>
        </ul>
        </p>
<div id="example_23_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_23">Copy</span>
                            </div>
                            <p class="content-title">redis.conf</p>
                            <pre id="example_23" class="
				code prettyprint
			">################################ SNAPSHOTTING  ################################
#
# Save the DB on disk:
#
#   save &lt;seconds&gt; &lt;changes&gt;
#
#   Will save the DB if both the given number of seconds and the given
#   number of write operations against the DB occurred.
#
#   In the example below the behaviour will be to save:
#   after 900 sec (15 min) if at least 1 key changed
#   after 300 sec (5 min) if at least 10 keys changed
#   after 60 sec if at least 10000 keys changed
#
#   Note: you can disable saving completely by commenting out all "save" lines.
#
#   It is also possible to remove all the previously configured save
#   points by adding a save directive with a single empty string argument
#   like in the following example:
#
#   save ""

save 900 1
save 300 10
save 60 10000</pre>
                        </div>        
    

    <div class="row">
                            <h2 id="426af64c52c551cad66a2c21ed634d3d" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">6.2&nbsp;Strong persistence aka AOF</h2>
                        </div>
        <p>
        The second mode provides <a href="https://redis.io/" target="_blank">Redis</a> with the highest level of persistence (also called <code class="em ">AOF</code>). Any command impacting the dataset will be saved synchronously in a file. In case of incident, <a href="https://redis.io/" target="_blank">Redis</a> replays the logged operations to reconstruct the database dataset.
        </p>
        <p>
        The typical use case is when using <a href="https://redis.io/" target="_blank">Redis</a> as a key-value store. We can imagine the comments on a blog post page being stored in a <a href="https://redis.io/" target="_blank">Redis</a> list. Losing comments because of an unexpected <a href="https://redis.io/" target="_blank">Redis</a> restart is not acceptable and activating <code class="em ">AOF</code> mode sounds like a good idea.
        </p>
<div id="example_24_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_24">Copy</span>
                            </div>
                            <p class="content-title">redis.conf</p>
                            <pre id="example_24" class="
				code prettyprint
			">############################## APPEND ONLY MODE ###############################

# By default Redis asynchronously dumps the dataset on disk. This mode is
# good enough in many applications, but an issue with the Redis process or
# a power outage may result into a few minutes of writes lost (depending on
# the configured save points).
#
# The Append Only File is an alternative persistence mode that provides
# much better durability. For instance using the default data fsync policy
# (see later in the config file) Redis can lose just one second of writes in a
# dramatic event like a server power outage, or a single write if something
# wrong with the Redis process itself happens, but the operating system is
# still running correctly.
#
# AOF and RDB persistence can be enabled at the same time without problems.
# If the AOF is enabled on startup Redis will load the AOF, that is the file
# with the better durability guarantees.
#
# Please check http://redis.io/topics/persistence for more information.

appendonly no

# The name of the append only file (default: "appendonly.aof")

appendfilename "appendonly.aof"</pre>
                        </div>        
    

    <div class="row">
                            <h2 id="6475605bed9318fa5152a1652bdc0b55" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">6.3&nbsp;Which persistence mode should I use ?</h2>
                        </div>
        <p>
        If your target is the same kind of data safety provided by your typical SQL database, you should use both <code class="em ">AOF</code> and <code class="em ">RDB</code>.
        </p>
        <p>
        If you care a lot about your data, but still can live with a few minutes of data loss in case of disasters, you can simply use <code class="em ">RDB</code> alone, you&rsquo;ll get better performance.
        </p>
        <p>
        Whatever is the configuration you choose, backups triggered by our system are generating a <code class="em ">RDB</code> snapshot of the database remotely, the snapshot is directly streamed to our backup controllers which encrypt and archive them.
        </p>
    

    <div class="row">
                            <h2 id="4f939a9e7460d04635516650a0dbf339" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">6.4&nbsp;Cache mode</h2>
                        </div>
        <p>
            The last available configuration is related to how long data are stored in <a href="https://redis.io/" target="_blank">Redis</a>. When cache mode is activated, 
            if the memory is full, <a href="https://redis.io/" target="_blank">Redis</a> will automatically drop the least used data to free up memory for most recent data. 
            Be cautious as any data can be deleted. Don&rsquo;t use your <a href="https://redis.io/" target="_blank">Redis</a> instance to store important information in this mode.
        </p>
        <p>
            The typical use case is a homepage or blog. It can use <a href="https://redis.io/" target="_blank">Redis</a> as a cache for HTML fragments. 
            In such case, we can afford using the oldest data stored in <a href="https://redis.io/" target="_blank">Redis</a>, and re-compute them if needed.
        </p>
        <p>
            This feature uses two settings of <a href="https://redis.io/" target="_blank">Redis</a>:
            <ul>
                    
                <li>
                        <code class="em ">maxmemory</code>: Amount of data redis accepts before dropping some of them. It is set at the value of the memory available of the database plan you&rsquo;ve chosen.</li> 
                <li>
                        <code class="em ">maxmemory-policy</code>: Set at allkeys-lru, which means &lsquo;Least Recently Used&rsquo; keys will be evicted first if the maxmemory amount is reached.</li> 
            </ul>
        </p>
<div id="example_25_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_25">Copy</span>
                            </div>
                            <p class="content-title">redis.conf</p>
                            <pre id="example_25" class="
				code prettyprint
			">############################## MEMORY MANAGEMENT ################################

# Set a memory usage limit to the specified amount of bytes.
# When the memory limit is reached Redis will try to remove keys
# according to the eviction policy selected (see maxmemory-policy).
#
# If Redis can't remove keys according to the policy, or if the policy is
# set to 'noeviction', Redis will start to reply with errors to commands
# that would use more memory, like SET, LPUSH, and so on, and will continue
# to reply to read-only commands like GET.
#
# This option is usually useful when using Redis as an LRU or LFU cache, or to
# set a hard memory limit for an instance (using the 'noeviction' policy).
#
# WARNING: If you have replicas attached to an instance with maxmemory on,
# the size of the output buffers needed to feed the replicas are subtracted
# from the used memory count, so that network problems / resyncs will
# not trigger a loop where keys are evicted, and in turn the output
# buffer of replicas is full with DELs of keys evicted triggering the deletion
# of more keys, and so forth until the database is completely emptied.
#
# In short... if you have replicas attached it is suggested that you set a lower
# limit for maxmemory so that there is some free RAM on the system for replica
# output buffers (but this is not needed if the policy is 'noeviction').
#
# maxmemory &lt;bytes&gt;

# MAXMEMORY POLICY: how Redis will select what to remove when maxmemory
# is reached. You can select among five behaviors:
#
# volatile-lru -&gt; Evict using approximated LRU among the keys with an expire set.
# allkeys-lru -&gt; Evict any key using approximated LRU.
# volatile-lfu -&gt; Evict using approximated LFU among the keys with an expire set.
# allkeys-lfu -&gt; Evict any key using approximated LFU.
# volatile-random -&gt; Remove a random key among the ones with an expire set.
# allkeys-random -&gt; Remove a random key, any key.
# volatile-ttl -&gt; Remove the key with the nearest expire time (minor TTL)
# noeviction -&gt; Don't evict anything, just return an error on write operations.
#
# LRU means Least Recently Used
# LFU means Least Frequently Used
#
# Both LRU, LFU and volatile-ttl are implemented using approximated
# randomized algorithms.
#
# Note: with any of the above policies, Redis will return an error on write
#       operations, when there are no suitable keys for eviction.
#
#       At the date of writing these commands are: set setnx setex append
#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd
#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby
#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby
#       getset mset msetnx exec sort
#
# The default is:
#
# maxmemory-policy noeviction

# LRU, LFU and minimal TTL algorithms are not precise algorithms but approximated
# algorithms (in order to save memory), so you can tune it for speed or
# accuracy. For default Redis will check five keys and pick the one that was
# used less recently, you can change the sample size using the following
# configuration directive.
#
# The default of 5 produces good enough results. 10 Approximates very closely
# true LRU but costs more CPU. 3 is faster but not very accurate.
#
# maxmemory-samples 5

# Starting from Redis 5, by default a replica will ignore its maxmemory setting
# (unless it is promoted to master after a failover or manually). It means
# that the eviction of keys will be just handled by the master, sending the
# DEL commands to the replica as keys evict in the master side.
#
# This behavior ensures that masters and replicas stay consistent, and is usually
# what you want, however if your replica is writable, or you want the replica to have
# a different memory setting, and you are sure all the writes performed to the
# replica are idempotent, then you may change this default (but be sure to understand
# what you are doing).
#
# Note that since the replica by default does not evict, it may end using more
# memory than the one set via maxmemory (there are certain buffers that may
# be larger on the replica, or data structures may sometimes take more memory and so
# forth). So make sure you monitor your replicas and make sure they have enough
# memory to never hit a real out-of-memory condition before the master hits
# the configured maxmemory setting.
#
# replica-ignore-maxmemory yes</pre>
                        </div>        
    
<div class="row">
                            <h1 id="aa6ed0ec6f94c5bebd68e372fd4aa9b3" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">7&nbsp;Redis Cluster</h1>
                        </div>
    
		<div class="row">
                            <h2 id="7d836e593c0036d3537c783cd424648b" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">7.1&nbsp;Creating and using a Redis Cluster</h2>
                        </div>
			<p>To create a cluster, the first thing we need is to have a few empty <a href="https://redis.io/" target="_blank">Redis</a> instances running in cluster mode.
			This basically means that clusters are not created using normal <a href="https://redis.io/" target="_blank">Redis</a> instances as a special mode needs to be
			configured so that the <a href="https://redis.io/" target="_blank">Redis</a> instance will enable the Cluster specific features and commands.</p>
			
			<p>The following is a minimal <a href="https://redis.io/" target="_blank">Redis</a> cluster configuration file:</p>
<div id="example_26_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_26">Copy</span>
                            </div>
                            <pre id="example_26" class="
				code prettyprint
			">cluster-enabled yes
cluster-config-file nodes.conf
cluster-node-timeout 15000
appendonly yes</pre>
                        </div>
	

    <div class="row">
                            <h2 id="bcd670bcd5eef421f367aea5705c6f83" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">7.2&nbsp;Redis Cluster master-slave model</h2>
                        </div>

        <p>In order to remain available when a subset of master nodes are failing or are not able to communicate
        with the majority of nodes, <a href="https://redis.io/" target="_blank">Redis</a> Cluster uses a master-slave model where every hash slot has
        from 1 (the master itself) to N replicas (N-1 additional slaves nodes).</p>
        <p>Next grah show how <a href="https://redis.io/" target="_blank">Redis</a> offers High Availability and Automatic Failover</p>
        <a href="/mediaContent/Databases.30/Redis/media/Redis-HA.png?v=0" data-toggle="lightbox" data-type="image" data-title="Redis-HA.png">
                            <img src="/mediaContent/Databases.30/Redis/media/Redis-HA.png?v=0" class="img-fluid mx-auto" style="" />
                        </a>
        <p>Sentinel always checks the MASTER and SLAVE instances in the <a href="https://redis.io/" target="_blank">Redis</a> cluster, checking whether they working as expected.
        If sentinel detects a failure in the MASTER node in a given cluster, Sentinel will start a failover process. As a result,
        Sentinel will pick a SLAVE instance and promote it to MASTER. Ultimately, the other remaining SLAVE instances will be
        automatically reconfigured to use the new MASTER instance.</p>
        <p>To configure Master and Slave nodes you need to change some parameters in your configuration</p>
        <div class="table-responsive">
                            <table class="table table-bordered table-sm">
            <tr>
                    <td />
                    <td>Initial Master</td>
                    <td>Slave</td>
                </tr>
            <tr>
                    <td>redis.conf</td>
                    <td>protected-mode no<br />
                    </td>
                    <td>protected-mode no<br />slaveof redis1 6379
                    </td>
                </tr>
            <tr>
                    <td>sentinel.conf</td>
                    <td>protected-mode no<br />
                    bind 0.0.0.0<br />
                    port 26379<br />
                    sentinel monitor mymaster redis1 6379 2<br />
                    sentinel down-after-milliseconds mymaster 8000<br />
                    sentinel failover-timeout mymaster 10000<br />
                    logfile "/home/redis/log/sentinel.log"<br />
                    </td>
                    <td>protected-mode no<br />
                    bind 0.0.0.0<br />
                    port 26379<br />
                    sentinel monitor mymaster redis1 6379 2<br />
                    sentinel down-after-milliseconds mymaster 8000<br />
                    sentinel failover-timeout mymaster 10000<br />
                    logfile "/home/redis/log/sentinel.log"<br />
                    </td>
                </tr>
        </table>
                        </div>
        <p>The only difference in redis.conf files in the servers is that, all the slaves must have the following config. redis1 is the Master IP address.</p>
<div id="example_27_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_27">Copy</span>
                            </div>
                            <pre id="example_27" class="
				code prettyprint
			">slaveof redis1 6379</pre>
                        </div>
<p>In sentinel.conf, following config notify Sentinels to start the cluster monitoring with following initial settings.
Afterwards this config setting may automatically updated accordingly.</p>
<div id="example_28_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_28">Copy</span>
                            </div>
                            <pre id="example_28" class="
				code prettyprint
			">sentinel monitor mymaster redis1 6379 2</pre>
                        </div>
<p>This tells sentinel to monitor the master node. And the last argument which is 2 is the quorum value)</p>
<p>To start sentinel node you require to start previously the normal <a href="https://redis.io/" target="_blank">Redis</a> node and then execute:</p>
<div id="example_29_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_29">Copy</span>
                            </div>
                            <pre id="example_29" class="
				code prettyprint
			">bin/redis-server etc/sentinel.conf --sentinel</pre>
                        </div>

<a class="anchor" name="_anchor_create_sentinel_systemd_service">&nbsp;</a>
                        <div class="row">
                            <h2 id="f1ee445785f41b1cd6b67b82417c7157" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">7.3&nbsp;Create sentinel systemd service</h2>
                        </div>
            <p>Create systemd service file on <code class="em ">/etc/systemd/system/redis-sentinel.service</code>
            </p>
    <div id="example_30_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_30">Copy</span>
                            </div>
                            <pre id="example_30" class="
				code prettyprint
			">[Unit]
Description=Sentinel for Redis
After=network.target redis-server.service

[Service]
LimitNOFILE=64000
User=redis
PermissionsStartOnly=true
ExecStartPre=/bin/su redis -c "/bin/mkdir -p /home/redis/log"
ExecStart=/home/redis/bin/redis-server /home/redis/etc/sentinel.conf --sentinel --daemonize no

[Install]
WantedBy=multi-user.target</pre>
                        </div>
<p>Then you can use systemd to run <a href="https://redis.io/" target="_blank">Redis</a> as a managed service, e.g.</p>
<div id="example_31_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_31">Copy</span>
                            </div>
                            <pre id="example_31" class="
				code prettyprint
			">systemctl daemon-reload
systemctl start redis-sentinel
systemctl enable redis-sentinel</pre>
                        </div>
<p>Create an auto-rotate log definition on <code class="em ">/etc/logrotate.d/redis-sentinel</code>
            </p>
<div id="example_32_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_32">Copy</span>
                            </div>
                            <pre id="example_32" class="
				code prettyprint
			">/home/redis/log/sentinel.log {
    daily
    rotate 14
    copytruncate
    delaycompress
    compress
    notifempty
    missingok
}</pre>
                        </div>


        <div class="row">
                            <h2 id="9d885ac56dedacdf658605c4f0be71c9" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">7.4&nbsp;Verify configuration is working</h2>
                        </div>
    <p>
        To simply get the role of a node type:
    </p>
<div id="example_33_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_33">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_33" class="
				code prettyprint
			">$ redis-cli info | grep role</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">role:master</pre>
                            </figure>
                        </div>    
    
        <p>
        And to get the number of slaves of a master node:
    </p>
<div id="example_34_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_34">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_34" class="
				code prettyprint
			">$ redis-cli info | grep slaves</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">mem_clients_slaves:0
connected_slaves:0</pre>
                            </figure>
                        </div>    
    
    
    <div class="row">
                            <h3 id="a679c9d7665df504ed9eee8d23ee1b4f" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">7.4.1&nbsp;Verify replication is working</h3>
                        </div>
        <p>To verify if master-slave replication is working properly, you can ask server replication status by using <code class="em ">info replication</code> command in redis client:</p>
        <div id="example_35_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_35">Copy</span>
                            </div>
                            <pre id="example_35" class="
				code prettyprint
			">redis-cli</pre>
                        </div>
    <p>Result of statement execution will show the replication role and connectivity status. In next example, we show results for an slave redis server:</p>
    <div id="example_36_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_36">Copy</span>
                            </div>
                            <pre id="example_36" class="
				code prettyprint
			">127.0.0.1:6379&gt; INFO replication
# Replication
role:slave
master_host:192.168.105.173
master_port:6379
master_link_status:up
master_last_io_seconds_ago:0
master_sync_in_progress:0
slave_repl_offset:3716677025
slave_priority:100
slave_read_only:1
connected_slaves:0
master_replid:c4931367335461d81e7db7d43fdf3ae345b976d9
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:3716677025
second_repl_offset:-1
repl_backlog_active:1
repl_backlog_size:1048576
repl_backlog_first_byte_offset:3716662854
repl_backlog_histlen:14172</pre>
                        </div>
    
    <div class="row">
                            <h3 id="9d61b57ff9cd6d44b1b5caf18c7196fc" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">7.4.2&nbsp;Verify sentinel is working</h3>
                        </div>
    <p>You can verify sentinel is working properly by connecting to one sentinel service and querying for status:</p>
    <div id="example_37_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_37">Copy</span>
                            </div>
                            <pre id="example_37" class="
				code prettyprint
			">redis-cli -h localhost -p 26379</pre>
                        </div>
    <p>In order to explore more about this instance, you may want to try the following two commands:</p>
    <div id="example_38_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_38">Copy</span>
                            </div>
                            <pre id="example_38" class="
				code prettyprint
			">SENTINEL slaves mymaster
SENTINEL sentinels mymaster</pre>
                        </div>

<div class="row">
                            <h4 class="page-section-title col-11">Obtaining the address of the current master</h4>
                        </div>

<p>As we already specified, Sentinel also acts as a configuration provider for clients that want to connect to a set of master and replicas.
Because of possible failovers or reconfigurations, clients have no idea about who is the currently active master for a given set of instances,
so Sentinel exports an API to ask this question:</p>
<div id="example_39_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_39">Copy</span>
                            </div>
                            <pre id="example_39" class="
				code prettyprint
			">127.0.0.1:26379&gt; SENTINEL get-master-addr-by-name mymaster
1) "127.0.0.1"
2) "6379"</pre>
                        </div>



<div class="row">
                            <h1 id="42e1a93062895e0f852af9175f7cf18e" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">8&nbsp;Using redis-cli</h1>
                        </div>
        <p>
            If redis is installed on your local machine, simply access to redis by using:
        </p>
<div id="example_40_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_40">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_40" class="
				code prettyprint
			">$ redis-cli</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">127.0.0.1:6379&gt;</pre>
                            </figure>
                        </div>            

        <div class="row">
                            <h2 id="6b7063d55a5a923e6f50290d7a6ce230" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">8.1&nbsp;Setting key values</h2>
                        </div>

        <p>
            For the vast majority of data storage with <a href="https://redis.io/" target="_blank">Redis</a>, data will be stored in a simple key/value pair. 
            This is best shown through the <a href="https://redis.io/topics/rediscli" target="_blank">redis-cli</a> (command line interface) using GET and <a href="https://redis.io/commands/SET" target="_blank">SET</a> commands.
        </p>
        <p>
            For example, we may want to store some information about books, such as the title and author of a few of our favorites.
        </p>    
<div id="example_41_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_41">Copy</span>
                            </div>
                            <pre id="example_41" class="
				code prettyprint
			">&gt; SET title "The Hobbit"
OK
&gt; SET author "J.R.R. Tolkien"
OK</pre>
                        </div>
        
        
        
        <div class="row">
                            <h2 id="ce7c1a3bc3a9ab3b3e9cf5b799482d66" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">8.2&nbsp;Getting key values</h2>
                        </div>
        <p>
        The title and author are the keys we&rsquo;ve set and the actual string values were specified after. So we can view them with GET, like so:    
        </p>
<div id="example_42_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_42">Copy</span>
                            </div>
                            <pre id="example_42" class="
				code prettyprint
			">&gt; GET title
"The Hobbit"
&gt; GET author
"J.R.R. Tolkien"</pre>
                        </div>        
        
        
        <div class="row">
                            <h2 id="d6d4a095b406e73f2c61d860a4fec9c4" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">8.3&nbsp;Retrieving all existing keys</h2>
                        </div>
            <p>
                As it turns out, every <a href="https://redis.io/commands/SET" target="_blank">SET</a> command we issued above created a new, unique key within our <a href="https://redis.io/" target="_blank">Redis</a> database. To get a list of all current keys that exist, simply use the KEYS command:
            </p>
    <div id="example_43_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_43">Copy</span>
                            </div>
                            <pre id="example_43" class="
				code prettyprint
			">&gt; KEYS *
1) "author"
2) "title"</pre>
                        </div>        
            <p>
                To get the number of keys
            </p>
<div id="example_44_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_44">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_44" class="
				code prettyprint
			">INFO Keyspace</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			"># Keyspace
db0:keys=718092,expires=0,avg_ttl=0</pre>
                            </figure>
                        </div>            
            <div class="bs-callout bs-callout-danger text-justify">
                As mentioned in the official documentation, it is advisable to avoid using the KEYS command on very large databases, but in particular avoid using it in a production environment. Since KEYS is returning potentially every key in the system, this can have a dramatic negative impact on performance.
            </div>
        
        <div class="row">
                            <h2 id="eae62e514374ce8d8778ee0870d1df75" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">8.4&nbsp;Mass insertion</h2>
                        </div>
            <p>
                Sometimes <a href="https://redis.io/" target="_blank">Redis</a> instances need to be loaded with a big amount of preexisting or user generated data in a short amount of time, so that millions of keys will be created as fast as possible.
            </p>
            <p>
                This is called a mass insertion, and the goal of this document is to provide information about how to feed <a href="https://redis.io/" target="_blank">Redis</a> with data as fast as possible.
            </p>
            
            <p>
                Using a normal <a href="https://redis.io/" target="_blank">Redis</a> client to perform mass insertion is not a good idea for a few reasons: the naive approach of sending one command after the other is slow because you have to pay for the round trip time for every command. It is possible to use pipelining, but for mass insertion of many records you need to write new commands while you read replies at the same time to make sure you are inserting as fast as possible.
            </p>
            <p>
                Only a small percentage of clients support non-blocking I/O, and not all the clients are able to parse the replies in an efficient way in order to maximize throughput. For all of these reasons the preferred way to mass import data into <a href="https://redis.io/" target="_blank">Redis</a> is to generate a text file containing the <a href="https://redis.io/" target="_blank">Redis</a> protocol, in raw format, in order to call the commands needed to insert the required data.
            </p>
            <p>
                For instance if I need to generate a large data set where there are billions of keys in the form: `keyN -&gt; ValueN' I will create a file containing the following commands in the <a href="https://redis.io/" target="_blank">Redis</a> protocol format:
            </p>
<div id="example_45_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_45">Copy</span>
                            </div>
                            <pre id="example_45" class="
				code prettyprint
			">SET Key0 Value0
SET Key1 Value1
...
SET KeyN ValueN</pre>
                        </div>           
            <p>
                Once this file is created, the remaining action is to feed it to <a href="https://redis.io/" target="_blank">Redis</a> as fast as possible. In the past the way to do this was to use the netcat with the following command:
            </p>
<div id="example_46_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_46">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_46" class="
				code prettyprint
			">cat data.txt | redis-cli --pipe</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">All data transferred. Waiting for the last reply...
Last reply received from server.
errors: 0, replies: 1000000</pre>
                            </figure>
                        </div>         
            <p>
                The <a href="https://redis.io/topics/rediscli" target="_blank">redis-cli</a> utility will also make sure to only redirect errors received from the <a href="https://redis.io/" target="_blank">Redis</a> instance to the standard output.
            </p>
            
            <div class="row">
                            <h2 id="417690dbf15a6a99b4107a54f7f8feab" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">8.5&nbsp;Delete all keys</h2>
                        </div>
     <p>
            Get number of keys
        </p>    
<div id="example_47_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_47">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_47" class="
				code prettyprint
			">$ redis-cli INFO Keyspace</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">db0:keys=718092,expires=0,avg_ttl=0</pre>
                            </figure>
                        </div>
        <p>
            Delete all keys from all <a href="https://redis.io/" target="_blank">Redis</a> databases:
        </p>    
<div id="example_48_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_48">Copy</span>
                            </div>
                            <pre id="example_48" class="
				code prettyprint
			">$ redis-cli FLUSHALL</pre>
                        </div>

        <p>
            Delete all keys of the currently selected <a href="https://redis.io/" target="_blank">Redis</a> database:
        </p>    
<div id="example_49_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_49">Copy</span>
                            </div>
                            <pre id="example_49" class="
				code prettyprint
			">$ redis-cli FLUSHDB</pre>
                        </div>
        <p>
            Delete all keys of the specified <a href="https://redis.io/" target="_blank">Redis</a> database:
        </p>    
<div id="example_50_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_50">Copy</span>
                            </div>
                            <pre id="example_50" class="
				code prettyprint
			">$ redis-cli -n &lt;database_number&gt; FLUSHDB</pre>
                        </div>

    
        <div class="row">
                            <h1 id="d638e4dd68fba3669fd9d73b19e50712" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9&nbsp;Data types</h1>
                        </div>
        <p>
            <a href="https://redis.io/" target="_blank">Redis</a> is so much more than just a key/value store. It has some interesting data-structures. Each structure comes with its own set of commands to manipulate the underlying data.
        </p>
            <a href="/mediaContent/Databases.30/Redis/media/redis-data-structure-types1.jpeg?v=0" data-toggle="lightbox" data-type="image" data-title="redis-data-structure-types1.jpeg">
                            <img src="/mediaContent/Databases.30/Redis/media/redis-data-structure-types1.jpeg?v=0" class="img-fluid mx-auto" style="" />
                        </a>
        <div class="row">
                            <h2 id="ee7f836feddc2fb19d6dd15696809f94" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.1&nbsp;Keys</h2>
                        </div>
            <p>
                <a href="https://redis.io/" target="_blank">Redis</a> keys are binary safe, this means that you can use any binary sequence as a key, from a string like "foo" to the content of a JPEG file. The empty string is also a valid key.
            </p>
            <p>    
                A few other rules about keys:
                <ul>
                    <li>Very long keys are not a good idea. For instance a key of 1024 bytes is a bad idea not only memory-wise, but also because the lookup of the key in the dataset may require several costly key-comparisons. Even when the task at hand is to match the existence of a large value, hashing it (for example with SHA1) is a better idea, especially from the perspective of memory and bandwidth.</li>
                    <li>Very short keys are often not a good idea. There is little point in writing "u1000flw" as a key if you can instead write "user:1000:followers". The latter is more readable and the added space is minor compared to the space used by the key object itself and the value object. While short keys will obviously consume a bit less memory, your job is to find the right balance.</li>
                    <li>Try to stick with a schema. For instance "object-type:id" is a good idea, as in "user:1000". Dots or dashes are often used for multi-word fields, as in "comment:1234:reply.to" or "comment:1234:reply-to".</li>
                    <li>The maximum allowed key size is 512 MB.</li>
                </ul>
            </p>
            
        <div class="row">
                            <h3 id="f818da2e7e37a706f956871ed2293971" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.1.1&nbsp;Key TTL</h3>
                        </div>
            <p>
            Before continuing with more complex data structures, we need to discuss another feature which works regardless of the value type, and is called <a href="https://redis.io/" target="_blank">Redis</a> expires. Basically you can set a timeout for a key, which is a limited time to live. When the time to live elapses, the key is automatically destroyed, exactly as if the user called the <a href="https://redis.io/commands/DEL" target="_blank">DEL</a> command with the key.
            </p>
            <p>
            A few quick info about <a href="https://redis.io/" target="_blank">Redis</a> expires:
            <ul>
                <li>They can be set both using seconds or milliseconds precision.</li>
                <li>However the expire time resolution is always 1 millisecond.</li>
                <li>Information about expires are replicated and persisted on disk, the time virtually passes when your <a href="https://redis.io/" target="_blank">Redis</a> server remains stopped (this means that <a href="https://redis.io/" target="_blank">Redis</a> saves the date at which a key will expire).</li>
            </ul>
            </p>
            <p>
            Setting an expire is trivial:    
            </p>
<div id="example_51_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_51">Copy</span>
                            </div>
                            <pre id="example_51" class="
				code prettyprint
			">&gt; set key some-value
OK
&gt; expire key 5
(integer) 1
&gt; get key (immediately)
"some-value"
&gt; get key (after some time)
(nil)</pre>
                        </div>            
        
            <div class="row">
                            <h3 id="877aba3b6c888e65891dc37f47906f90" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.1.2&nbsp;Delete a key</h3>
                        </div>
            <p>
                To delete a key simply use the command <a href="https://redis.io/commands/DEL" target="_blank">DEL</a>.
            </p>
<div id="example_52_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_52">Copy</span>
                            </div>
                            <pre id="example_52" class="
				code prettyprint
			">del key</pre>
                        </div>                
        
        
        <div class="row">
                            <h2 id="704532b19d8d1b998bd394a207ea10ae" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.2&nbsp;Strings</h2>
                        </div>
            <p>
            The <a href="https://redis.io/" target="_blank">Redis</a> String type is the simplest type of value you can associate with a <a href="https://redis.io/" target="_blank">Redis</a> key. It is the only data type in Memcached, so it is also very natural for newcomers to use it in <a href="https://redis.io/" target="_blank">Redis</a>.
            </p>
            <p>
            Since <a href="https://redis.io/" target="_blank">Redis</a> keys are strings, when we use the string type as a value too, we are mapping a string to another string. The string data type is useful for a number of use cases, like caching HTML fragments or pages.
            </p>
<div id="example_53_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_53">Copy</span>
                            </div>
                            <pre id="example_53" class="
				code prettyprint
			">&gt; set mykey somevalue
OK
&gt; get mykey
"somevalue"</pre>
                        </div>    

        
        <div class="row">
                            <h2 id="3cf3430a734c36496495f91242416cbf" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.3&nbsp;Lists</h2>
                        </div>
           <p>
               <a href="https://redis.io/" target="_blank">Redis</a> Lists are simply lists of strings, sorted by insertion order. It is possible to add elements to a <a href="https://redis.io/" target="_blank">Redis</a> List pushing new elements on the head (on the left) or on the tail (on the right) of the list.
           </p>
           <p>

            The <a href="https://redis.io/commands/LPUSH" target="_blank">LPUSH</a> command inserts a new element on the head, while <a href="https://redis.io/commands/RPUSH" target="_blank">RPUSH</a> inserts a new element on the tail. A new list is created when one of this operations is performed against an empty key. Similarly the key is removed from the key space if a list operation will empty the list. These are very handy semantics since all the list commands will behave exactly like they were called with an empty list if called with a non-existing key as argument.
           </p>
           <p>
                Some example of list operations and resulting lists:
           </p>    
<div id="example_54_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_54">Copy</span>
                            </div>
                            <pre id="example_54" class="
				code prettyprint
			">LPUSH mylist a   # now the list is "a"
LPUSH mylist b   # now the list is "b","a"
RPUSH mylist c   # now the list is "b","a","c" (RPUSH was used this time)</pre>
                        </div>           

            <p>
                The main features of <a href="https://redis.io/" target="_blank">Redis</a> Lists from the point of view of time complexity are the support for constant time insertion and deletion of elements near the head and tail, even with many millions of inserted items. Accessing elements is very fast near the extremes of the list but is slow if you try accessing the middle of a very big list, as it is an O(N) operation.
            </p>
            <p>
                You can do many interesting things with <a href="https://redis.io/" target="_blank">Redis</a> Lists, for instance you can:
                <ul>
                    <li>Model a timeline in a social network, using <a href="https://redis.io/commands/LPUSH" target="_blank">LPUSH</a> in order to add new elements in the user time line, and using <a href="https://redis.io/commands/LRANGE" target="_blank">LRANGE</a> in order to retrieve a few of recently inserted items.</li>
                    <li>You can use <a href="https://redis.io/commands/LPUSH" target="_blank">LPUSH</a> together with LTRIM to create a list that never exceeds a given number of elements, but just remembers the latest N elements.</li>
                    <li>Lists can be used as a message passing primitive, See for instance the well known Resque Ruby library for creating background jobs.</li>
                    <li>You can do a lot more with lists, this data type supports a number of commands, including blocking commands like <a href="https://redis.io/commands/BLPOP" target="_blank">BLPOP</a>.</li>
                </ul>
            </p>
        

        <div class="row">
                            <h2 id="6e12684b4ecc9c7b18e090b3169f8c54" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.4&nbsp;Sets</h2>
                        </div>
        <p>
            <a href="https://redis.io/" target="_blank">Redis</a> Sets are an unordered collection of Strings. It is possible to add, remove, and test for existence of members in O(1) (constant time regardless of the number of elements contained inside the Set).
        </p>
        <p>
            <a href="https://redis.io/" target="_blank">Redis</a> Sets have the desirable property of not allowing repeated members. Adding the same element multiple times will result in a set having a single copy of this element. Practically speaking this means that adding a member does not require a check if exists then add operation.
        </p>
        <p>
            A very interesting thing about <a href="https://redis.io/" target="_blank">Redis</a> Sets is that they support a number of server side commands to compute sets starting from existing sets, so you can do unions, intersections, differences of sets in very short time.
        </p>
        <p>
            The max number of members in a set is 232 - 1 (4294967295, more than 4 billion of members per set).
        </p>
        <p>
            You can do many interesting things using <a href="https://redis.io/" target="_blank">Redis</a> Sets, for instance you can:
            <ul>
                <li>You can track unique things using <a href="https://redis.io/" target="_blank">Redis</a> Sets. Want to know all the unique IP addresses visiting a given blog post? Simply use <a href="https://redis.io/commands/SADD" target="_blank">SADD</a> every time you process a page view. You are sure repeated IPs will not be inserted.</li>
                <li>
                                    <a href="https://redis.io/" target="_blank">Redis</a> Sets are good to represent relations. You can create a tagging system with <a href="https://redis.io/" target="_blank">Redis</a> using a Set to represent every tag. Then you can add all the IDs of all the objects having a given tag into a Set representing this particular tag, using the <a href="https://redis.io/commands/SADD" target="_blank">SADD</a> command. Do you want all the IDs of all the Objects having three different tags at the same time? Just use <a href="https://redis.io/commands/SINTER" target="_blank">SINTER</a>.</li>
                <li>You can use Sets to extract elements at random using the <a href="https://redis.io/commands/SPOP" target="_blank">SPOP</a> or <a href="https://redis.io/commands/SRANDMEMBER" target="_blank">SRANDMEMBER</a> commands.</li>
            </ul>
        </p>
        <p>
            Lets see how to add two elements to a set and the get it's cardinality (number of elements on the set) using <a href="https://redis.io/commands/SCARD" target="_blank">SCARD</a>.
        </p>
<div id="example_55_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_55">Copy</span>
                            </div>
                            <pre id="example_55" class="
				code prettyprint
			">SADD myset "Hello"
(integer) 1
SADD myset "World"
(integer) 1
SCARD myset
(integer) 2
redis&gt;</pre>
                        </div>        
            <div class="row">
                            <h3 id="3377dba182319e7bb3ed24112c5d49f2" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.4.1&nbsp;Difference between two sets</h3>
                        </div>
                <p>
                    <a href="https://redis.io/commands/SDIFF" target="_blank">SDIFF</a> returns the members of the set resulting from the difference between the first set and all the successive sets.
                </p>
<div id="example_56_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_56">Copy</span>
                            </div>
                            <pre id="example_56" class="
				code prettyprint
			">SADD key1 "a"
SADD key1 "b"
SADD key1 "c"
SADD key2 "c"
SADD key2 "d"
SADD key2 "e"
SDIFF key1 key2
1) "b"
2) "a"</pre>
                        </div>        

            
            
            <div class="row">
                            <h3 id="44a88b89509edec935c624e28459d0a1" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.4.2&nbsp;Union of two sets</h3>
                        </div>
                <p>
                    <a href="https://redis.io/commands/SUNION" target="_blank">SUNION</a> returns the members of the set resulting from the union of all the given sets.
                </p>
<div id="example_57_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_57">Copy</span>
                            </div>
                            <pre id="example_57" class="
				code prettyprint
			">SADD key1 "a"
SADD key1 "b"
SADD key1 "c"
SADD key2 "c"
SADD key2 "d"
SADD key2 "e"
SUNION key1 key2
1) "c"
2) "e"
3) "b"
4) "a"
5) "d"</pre>
                        </div>            
            
            <div class="row">
                            <h3 id="1fefee3b32f0cb3d3faed2b6d052c49e" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.4.3&nbsp;Union of two sets into third set</h3>
                        </div>
                <p>
                    <a href="https://redis.io/commands/SUNIONSTORE" target="_blank">SUNIONSTORE</a> is equal to <a href="https://redis.io/commands/SUNION" target="_blank">SUNION</a>, but instead of returning the resulting set, it is stored in destination.
                    If destination already exists, it is overwritten.
                </p>
<div id="example_58_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_58">Copy</span>
                            </div>
                            <pre id="example_58" class="
				code prettyprint
			">SADD key1 "a"
SADD key1 "b"
SADD key1 "c"
SADD key2 "c"
SADD key2 "d"
SADD key2 "e"
SUNIONSTORE key key1 key2
SMEMBERS key
1) "c"
2) "e"
3) "b"
4) "a"
5) "d"</pre>
                        </div>                
            
            <div class="row">
                            <h3 id="230025eb06bd68a0ceaac2e4ed7c2379" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.4.4&nbsp;Get random member of a set</h3>
                        </div>
                <p>
                    <a href="https://redis.io/commands/SRANDMEMBER" target="_blank">SRANDMEMBER</a> called with just the key argument, return a random element from the set value stored at key.
                </p>
                <p>
                    when called with the additional count argument, return an array of count distinct elements if count is positive. If called with a negative count the behavior changes and the command is allowed to return the same element multiple times. In this case the number of returned elements is the absolute value of the specified count.
                </p>
                <p>
                    When called with just the key argument, the operation is similar to <a href="https://redis.io/commands/SPOP" target="_blank">SPOP</a>, however while <a href="https://redis.io/commands/SPOP" target="_blank">SPOP</a> also removes the randomly selected element from the set, <a href="https://redis.io/commands/SRANDMEMBER" target="_blank">SRANDMEMBER</a> will just return a random element without altering the original set in any way.
                </p>
<div id="example_59_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_59">Copy</span>
                            </div>
                            <pre id="example_59" class="
				code prettyprint
			">SADD myset one two three
SRANDMEMBER myset
SRANDMEMBER myset 2
1) "two"
2) "three"
RANDMEMBER myset -5
1) "three"
2) "two"
3) "two"
4) "two"
5) "three"</pre>
                        </div>
                <div class="row">
                            <h4 class="page-section-title col-11">Specification of the behavior when count is passed</h4>
                        </div>
                    <p>
                    When a count argument is passed and is positive, the elements are returned as if every selected element is removed from the set (like the extraction of numbers in the game of Bingo). However elements are not removed from the Set. So basically:
                    <ul>
                        <li>No repeated elements are returned.</li>
                        <li>If count is bigger than the number of elements inside the Set, the command will only return the whole set without additional elements.</li>
                    </ul>
                    When instead the count is negative, the behavior changes and the extraction happens as if you put the extracted element inside the bag again after every extraction, so repeated elements are possible, and the number of elements requested is always returned as we can repeat the same elements again and again, with the exception of an empty Set (non existing key) that will always produce an empty array as a result.
                    </p>
                
            
        

        <div class="row">
                            <h2 id="12f8e08c14787a90f68eea22cf989e85" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.5&nbsp;Sorted Sets</h2>
                        </div>
           <p>
            <a href="https://redis.io/" target="_blank">Redis</a> Sorted Sets are, similarly to <a href="https://redis.io/" target="_blank">Redis</a> Sets, non repeating collections of Strings. The difference is that every member of a Sorted Set is associated with score, that is used in order to take the sorted set ordered, from the smallest to the greatest score. While members are unique, scores may be repeated.
           </p>
           <p>
            With sorted sets you can add, remove, or update elements in a very fast way (in a time proportional to the logarithm of the number of elements). Since elements are taken in order and not ordered afterwards, you can also get ranges by score or by rank (position) in a very fast way. Accessing the middle of a sorted set is also very fast, so you can use Sorted Sets as a smart list of non repeating elements where you can quickly access everything you need: elements in order, fast existence test, fast access to elements in the middle!
           </p>
           <p>
            In short with sorted sets you can do a lot of tasks with great performance that are really hard to model in other kind of databases.
           </p>
           <p>
            With Sorted Sets you can:
            <ul>            
                <li>Take a leader board in a massive online game, where every time a new score is submitted you update it using <a href="https://redis.io/commands/ZADD" target="_blank">ZADD</a>. You can easily take the top users using <a href="https://redis.io/commands/ZRANGE" target="_blank">ZRANGE</a>, you can also, given an user name, return its rank in the listing using <a href="https://redis.io/commands/ZRANK" target="_blank">ZRANK</a>. Using <a href="https://redis.io/commands/ZRANK" target="_blank">ZRANK</a> and <a href="https://redis.io/commands/ZRANGE" target="_blank">ZRANGE</a> together you can show users with a score similar to a given user. All very quickly.</li>
                <li>Sorted Sets are often used in order to index data that is stored inside <a href="https://redis.io/" target="_blank">Redis</a>. For instance if you have many hashes representing users, you can use a sorted set with elements having the age of the user as the score and the ID of the user as the value. So using <a href="https://redis.io/commands/ZRANGEBYSCORE" target="_blank">ZRANGEBYSCORE</a> it will be trivial and fast to retrieve all the users with a given interval of ages.</li>           
            </ul>
            </p>         
        
        
        <div class="row">
                            <h2 id="ec2d226c1071fa85ade127b07c7013e3" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.6&nbsp;Hashes</h2>
                        </div>
            <p>
                <a href="https://redis.io/" target="_blank">Redis</a> hashes look exactly how one might expect a "hash" to look, with field-value pairs:
            </p>
<div id="example_60_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_60">Copy</span>
                            </div>
                            <pre id="example_60" class="
				code prettyprint
			">&gt; hmset user:1000 username antirez birthyear 1977 verified 1
OK
&gt; hget user:1000 username
"antirez"
&gt; hget user:1000 birthyear
"1977"
&gt; hgetall user:1000
1) "username"
2) "antirez"
3) "birthyear"
4) "1977"
5) "verified"
6) "1"</pre>
                        </div>
            <p>
                While hashes are handy to represent objects, actually the number of fields you can put inside a hash has no practical limits (other than available memory), so you can use hashes in many different ways inside your application.
            </p>
            <p>
                The command <a href="https://redis.io/commands/HMSET" target="_blank">HMSET</a> sets multiple fields of the hash, while HGET retrieves a single field. <a href="https://redis.io/commands/HMGET" target="_blank">HMGET</a> is similar to HGET but returns an array of values:
            </p>
        

        <div class="row">
                            <h2 id="d26125a66c746796758030682b09e177" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.7&nbsp;Bitmaps</h2>
                        </div>
           <p>
            Bitmaps are not an actual data type, but a set of bit-oriented operations defined on the String type. Since strings are binary safe blobs and their maximum length is 512 MB, they are suitable to set up to 232 different bits.
           </p>
           <p>
            Bit operations are divided into two groups: constant-time single bit operations, like setting a bit to 1 or 0, or getting its value, and operations on groups of bits, for example counting the number of set bits in a given range of bits (e.g., population counting).
           </p>
           <p>
            One of the biggest advantages of bitmaps is that they often provide extreme space savings when storing information. For example in a system where different users are represented by incremental user IDs, it is possible to remember a single bit information (for example, knowing whether a user wants to receive a newsletter) of 4 billion of users using just 512 MB of memory.
           </p>
           <p>
            Bits are set and retrieved using the <a href="https://redis.io/commands/SETBIT" target="_blank">SETBIT</a> and <a href="https://redis.io/commands/GETBIT" target="_blank">GETBIT</a> commands:
           </p>
<div id="example_61_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_61">Copy</span>
                            </div>
                            <pre id="example_61" class="
				code prettyprint
			">&gt; setbit key 10 1
(integer) 1
&gt; getbit key 10
(integer) 1
&gt; getbit key 11
(integer) 0</pre>
                        </div>            
           <p>
            The <a href="https://redis.io/commands/SETBIT" target="_blank">SETBIT</a> command takes as its first argument the bit number, and as its second argument the value to set the bit to, which is 1 or 0. The command automatically enlarges the string if the addressed bit is outside the current string length.
           </p>
           <p>
            <a href="https://redis.io/commands/GETBIT" target="_blank">GETBIT</a> just returns the value of the bit at the specified index. Out of range bits (addressing a bit that is outside the length of the string stored into the target key) are always considered to be zero.
           </p>
           <p>
            There are three commands operating on group of bits:
                <ul>
                    <li>
                                    <a href="https://redis.io/commands/BITOP" target="_blank">BITOP</a> performs bit-wise operations between different strings. The provided operations are AND, OR, XOR and NOT.</li>
                    <li>
                                    <a href="https://redis.io/commands/BITCOUNT" target="_blank">BITCOUNT</a> performs population counting, reporting the number of bits set to 1.</li>
                    <li>
                                    <a href="https://redis.io/commands/BITPOS" target="_blank">BITPOS</a> finds the first bit having the specified value of 0 or 1.</li>
                    <li>Both <a href="https://redis.io/commands/BITPOS" target="_blank">BITPOS</a> and <a href="https://redis.io/commands/BITCOUNT" target="_blank">BITCOUNT</a> are able to operate with byte ranges of the string, instead of running for the whole length of the string. The following is a trivial example of <a href="https://redis.io/commands/BITCOUNT" target="_blank">BITCOUNT</a> call:</li>
                </ul>
           </p>
<div id="example_62_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_62">Copy</span>
                            </div>
                            <pre id="example_62" class="
				code prettyprint
			">&gt; setbit key 0 1
(integer) 0
&gt; setbit key 100 1
(integer) 0
&gt; bitcount key
(integer) 2</pre>
                        </div>
            <p>
            Common use cases for bitmaps are:
            <ul>
                <li>Real time analytics of all kinds.</li>
                <li>Storing space efficient but high performance boolean information associated with object IDs.</li>
            </ul>
           </p>
           <p>
            For example imagine you want to know the longest streak of daily visits of your web site users. You start counting days starting from zero, that is the day you made your web site public, and set a bit with <a href="https://redis.io/commands/SETBIT" target="_blank">SETBIT</a> every time the user visits the web site. As a bit index you simply take the current unix time, subtract the initial offset, and divide by the number of seconds in a day (normally, 3600*24).
           </p>
           <p>
            This way for each user you have a small string containing the visit information for each day. With <a href="https://redis.io/commands/BITCOUNT" target="_blank">BITCOUNT</a> it is possible to easily get the number of days a given user visited the web site, while with a few <a href="https://redis.io/commands/BITPOS" target="_blank">BITPOS</a> calls, or simply fetching and analyzing the bitmap client-side, it is possible to easily compute the longest streak.
           </p>
           <p>
            Bitmaps are trivial to split into multiple keys, for example for the sake of sharding the data set and because in general it is better to avoid working with huge keys. To split a bitmap across different keys instead of setting all the bits into a key, a trivial strategy is just to store M bits per key and obtain the key name with bit-number/M and the Nth bit to address inside the key with bit-number MOD M.
            </p>
        

        <div class="row">
                            <h2 id="3661b4b2e548523ddc7e5ba3b98ad89e" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.8&nbsp;Streams</h2>
                        </div>
            <div class="alert alert-danger">
                            <h4>TO DO</h4>This section is incomplete and will be concluded as soon as possible.</div>            
        

        <div class="row">
                            <h2 id="12df496734ae6bd78622f4bb1d59a199" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">9.9&nbsp;HyperLogLogs</h2>
                        </div>
           <p>
            A HyperLogLog is a probabilistic data structure used in order to count unique things (technically this is referred to estimating the cardinality of a set). Usually counting unique items requires using an amount of memory proportional to the number of items you want to count, because you need to remember the elements you have already seen in the past in order to avoid counting them multiple times. However there is a set of algorithms that trade memory for precision: you end with an estimated measure with a standard error, which in the case of the <a href="https://redis.io/" target="_blank">Redis</a> implementation is less than 1%. The magic of this algorithm is that you no longer need to use an amount of memory proportional to the number of items counted, and instead can use a constant amount of memory! 12k bytes in the worst case, or a lot less if your HyperLogLog (We'll just call them HLL from now) has seen very few elements.
           </p>
           <p>
            HLLs in <a href="https://redis.io/" target="_blank">Redis</a>, while technically a different data structure, are encoded as a <a href="https://redis.io/" target="_blank">Redis</a> string, so you can call GET to serialize a HLL, and <a href="https://redis.io/commands/SET" target="_blank">SET</a> to deserialize it back to the server.
           </p>
           <p>
            Conceptually the HLL API is like using Sets to do the same task. You would <a href="https://redis.io/commands/SADD" target="_blank">SADD</a> every observed element into a set, and would use <a href="https://redis.io/commands/SCARD" target="_blank">SCARD</a> to check the number of elements inside the set, which are unique since <a href="https://redis.io/commands/SADD" target="_blank">SADD</a> will not re-add an existing element.
           </p>
           <p>
            While you don't really add items into an HLL, because the data structure only contains a state that does not include actual elements, the API is the same:
            <ul>
                <li>Every time you see a new element, you add it to the count with <a href="https://redis.io/commands/PFADD" target="_blank">PFADD</a>.</li>
                <li>Every time you want to retrieve the current approximation of the unique elements added with <a href="https://redis.io/commands/PFADD" target="_blank">PFADD</a> so far, you use the <a href="https://redis.io/commands/PFCOUNT" target="_blank">PFCOUNT</a>.</li>
            </ul>
           </p>
<div id="example_63_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_63">Copy</span>
                            </div>
                            <pre id="example_63" class="
				code prettyprint
			">&gt; pfadd hll a b c d
(integer) 1
&gt; pfcount hll
(integer) 4</pre>
                        </div>
           <p>
            An example of use case for this data structure is counting unique queries performed by users in a search form every day.
            </p>         
        
    <div class="row">
                            <h1 id="421d8bc83ed776c4699b064d0a1e3e27" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">10&nbsp;Redis for application support</h1>
                        </div>
        <div class="row">
                            <h2 id="ad303379f8c6122c5ae49145d8408190" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">10.1&nbsp;Counters</h2>
                        </div>
            <p>
                The counter pattern is the most obvious thing you can do with <a href="https://redis.io/" target="_blank">Redis</a> atomic increment operations. The idea is simply send an <a href="https://redis.io/commands/INCR" target="_blank">INCR</a> command to <a href="https://redis.io/" target="_blank">Redis</a> every time an operation occurs. For instance in a web application we may want to know how many page views this user did every day of the year.
            </p>
            <p>
                To do so the web application may simply increment a key every time the user performs a page view, creating the key name concatenating the User ID and a string representing the current date.
            </p>
            <p>
                This simple pattern can be extended in many ways:
            </p>
            <p>
                It is possible to use <a href="https://redis.io/commands/INCR" target="_blank">INCR</a> and EXPIRE together at every page view to have a counter counting only the latest N page views separated by less than the specified amount of seconds.
                A client may use <a href="https://redis.io/commands/GETSET" target="_blank">GETSET</a> in order to atomically get the current counter value and reset it to zero.
                Using other atomic increment/decrement commands like <a href="https://redis.io/commands/DECR" target="_blank">DECR</a> or <a href="https://redis.io/commands/INCRBY" target="_blank">INCRBY</a> it is possible to handle values that may get bigger or smaller depending on the operations performed by the user. Imagine for instance the score of different users in an online game.
            </p>
<div id="example_64_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_64">Copy</span>
                            </div>
                            <pre id="example_64" class="
				code prettyprint
			">incr mycounter
(integer) 1
incr mycounter
(integer) 2
get mycounter
2</pre>
                        </div>            
        
        <div class="row">
                            <h2 id="5a5241ee0ffda0c3f1ab3febaf2ca893" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">10.2&nbsp;Top visited pages</h2>
                        </div>
            <p>
                We can use <a href="https://redis.io/" target="_blank">Redis</a> to maintain a lsit of most visited pages for a given user. Let's see how to do it using <a href="https://redis.io/commands/ZADD" target="_blank">ZADD</a> and <a href="https://redis.io/commands/ZRANGE" target="_blank">ZRANGE</a>:
            
                <ul>
                    <li>We only need to store the 10 last viewed items.</li>
                    <li>The last visited item should be stored at the beginning of the list.</li>
                    <li>A product should only appear once in the list (at the right place).</li>
                </ul>
            </p>
            
            <p>
                We will use <code class="em ">user:${userid}</code> fro key and <code class="em ">0 - System.currentTimeMillis()</code> for value so
                the lowest value will be the last accessed page.
            </p>
<div id="example_65_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_65">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_65" class="
				code prettyprint
			">zadd user:1 -1555596360001 Sprite
zadd user:1 -1555596360002 CocaCola
zadd user:1 -1555596360003 Aquarius
zadd user:1 -1555596360004 USB3
zadd user:1 -1555596360005 Ray
zadd user:1 -1555596360006 Nestle
zadd user:1 -1555596360007 Nexpreso
zadd user:1 -1555596360008 Beverly
zadd user:1 -1555596360009 Fanta
zadd user:1 -1555596360010 "Lemon crush"
zadd user:1 -1555596360011 Vitaminwater
zadd user:1 -1555596360012 Magento
zrange user:1 0 -1</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) "Magento"
 2) "Vitaminwater"
 3) "Lemon crush"
 4) "Fanta"
 5) "Beverly"
 6) "Nexpreso"
 7) "Nestle"
 8) "Ray"
 9) "USB3"
10) "Aquarius"
11) "CocaCola"
12) "Sprite"</pre>
                            </figure>
                        </div>      
            <p>
            So, to get top 3 we can do:
            </p>

<div id="example_66_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_66">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_66" class="
				code prettyprint
			">zrange user:1 0 2</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) "Magento"
 2) "Vitaminwater"
 3) "Lemon crush"</pre>
                            </figure>
                        </div>      
            <div class="row">
                            <h3 id="93c0ea1c9e6bd609dded9b24b98ed19e" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">10.2.1&nbsp;Keep range limited</h3>
                        </div>
            <p>
                We don&rsquo;t want to store more than is necessary &ndash; as every user has a last viewed list, things add up quickly.
            </p>
            <p>
                To keep things clean, we&rsquo;ll remove everything from rank 10 and up. Remember: the lowest rank is 0 = the lowest score = the most recent date, as we do 0 - ticks.
            </p>
            <p>
                To remove things from the ordered set, we must use the zremrangebyrank command. We&rsquo;re starting at rank 10. As stop we&rsquo;ll use -1, 
                which indicates the highest rank.
            </p>
<div id="example_67_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_67">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_67" class="
				code prettyprint
			">zremrangebyrank user:1 10 -1
zrange user:1 0 -1</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) "Magento"
 2) "Vitaminwater"
 3) "Lemon crush"
 4) "Fanta"
 5) "Beverly"
 6) "Nexpreso"
 7) "Nestle"
 8) "Ray"
 9) "USB3"
10) "Aquarius"</pre>
                            </figure>
                        </div>  
            
            <div class="row">
                            <h3 id="86d718d1f5d61370c70c20f2656c6651" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">10.2.2&nbsp;Delete the range</h3>
                        </div>
                <p>
                    Simply type
                </p>
<div id="example_68_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_68">Copy</span>
                            </div>
                            <pre id="example_68" class="
				code prettyprint
			">del user:1</pre>
                        </div>                
                   
        
    <div class="row">
                            <h1 id="4642dadf2fc2dd064d7cc2971704c0ea" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">11&nbsp;Monitoring redis</h1>
                        </div>
            <p>
                In order to monitor <a href="https://redis.io/" target="_blank">Redis</a> instances in real time you can use the --stat option. 
                The output is very clear about the behavior of the CLI in this mode:
            </p>
<div id="example_69_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_69">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_69" class="
				code prettyprint
			">$ redis-cli --stat</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">------- data ------ --------------------- load -------------------- - child -
keys       mem      clients blocked requests            connections
506        1015.00K 1       0       24 (+0)             7
506        1015.00K 1       0       25 (+1)             7
506        3.40M    51      0       60461 (+60436)      57
506        3.40M    51      0       146425 (+85964)     107
507        3.40M    51      0       233844 (+87419)     157
507        3.40M    51      0       321715 (+87871)     207
508        3.40M    51      0       408642 (+86927)     257
508        3.40M    51      0       497038 (+88396)     257</pre>
                            </figure>
                        </div>            
            
            <div class="row">
                            <h2 id="6e3b1321c69bb82b4bfd683a17bedb35" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">11.1&nbsp;Scanning for big keys</h2>
                        </div>
                <p>
                    In this special mode, <a href="https://redis.io/topics/rediscli" target="_blank">redis-cli</a> works as a key space analyzer. It scans the dataset for big keys,
                    but also provides information about the data types that the data set consists of. 
                    This mode is enabled with the --bigkeys option, and produces quite a verbose output:
                </p>
<div id="example_70_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_70">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_70" class="
				code prettyprint
			">$ redis-cli --bigkeys</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			"># Scanning the entire keyspace to find biggest keys as well as
# average sizes per key type.  You can use -i 0.1 to sleep 0.1 sec
# per 100 SCAN commands (not usually needed).

[00.00%] Biggest string found so far 'mycounter' with 1 bytes
[00.00%] Biggest string found so far 'author' with 14 bytes

-------- summary -------

Sampled 3 keys in the keyspace!
Total key length in bytes is 20 (avg len 6.67)

Biggest string found 'author' has 14 bytes

0 lists with 0 items (00.00% of keys, avg size 0.00)
0 hashs with 0 fields (00.00% of keys, avg size 0.00)
3 strings with 25 bytes (100.00% of keys, avg size 8.33)
0 streams with 0 entries (00.00% of keys, avg size 0.00)
0 sets with 0 members (00.00% of keys, avg size 0.00)
0 zsets with 0 members (00.00% of keys, avg size 0.00)</pre>
                            </figure>
                        </div>                
            
            
            <div class="row">
                            <h2 id="3f9be5bf5f853165bf0f27943c29e3ee" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">11.2&nbsp;Monitoring commands executed in Redis</h2>
                        </div>
                <p>
                    The monitoring mode is entered automatically once you use the MONITOR mode. It will print all the commands received by a <a href="https://redis.io/" target="_blank">Redis</a> instance:
                </p>
<div id="example_71_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_71">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_71" class="
				code prettyprint
			">$ redis-cli monitor</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">OK
1575199042.382828 [0 127.0.0.1:64018] "ping"</pre>
                            </figure>
                        </div>                
            
        <div class="row">
                            <h1 id="589232e85dfa26f2270fee313efa40b5" class="page-header page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12&nbsp;Extensions</h1>
                        </div>
            
        <div class="row">
                            <h2 id="9301914eb4e491fb54023c1854c6464c" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.1&nbsp;RediSearch</h2>
                        </div>
            <p>
                <a href="https://redislabs.com/redis-enterprise/technology/redis-search/" target="_blank">RediSearch</a> is a powerful text search and secondary indexing engine, built on top of <a href="https://redis.io/" target="_blank">Redis</a> as a <a href="https://redis.io/" target="_blank">Redis</a> module.
            </p>
            <p>
                Unlike <a href="https://redis.io/" target="_blank">Redis</a> search libraries, it does not use <a href="https://redis.io/" target="_blank">Redis</a>&rsquo; internal data structures. Using its own highly optimized data structures and algorithms, <a href="https://redislabs.com/redis-enterprise/technology/redis-search/" target="_blank">RediSearch</a> allows for advanced search features, with high performance and a small memory footprint. It can perform simple text searches as well as complex structured queries, filtering by numeric properties and geographical distances
            </p>
            
            <div class="row">
                            <h3 id="cebe6b976eb71c9cb7dd392a8ab5793e" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.1.1&nbsp;Install</h3>
                        </div>
                <p>
                    You can download <a href="https://redislabs.com/redis-enterprise/technology/redis-search/" target="_blank">RediSearch</a> source and compile it with make. See more information at <a href="https://oss.redislabs.com/redisearch/Quick_Start.html" target="_blank">https://oss.redislabs.com/redisearch/Quick_Start.html</a>.
                    <ul>
                        <li>
                            On MacOS you should have <code class="em ">cmake</code> and <code class="em ">Xcode</code> installed.
                        </li>
                        <li>
                            On Linux you should have <code class="em ">cmake</code> and <code class="em ">gcc-c++</code> installed
                        </li>
                        <li>
                            On CentOS 8 remember you should have installed Python 2 and renamed python binary and pip names
                        </li>
                    </ul>
                </p>
<div id="example_72_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_72">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_72" class="
				code prettyprint
			">cd $HOME/src
git clone --recursive https://github.com/RediSearch/RediSearch.git 
cd RediSearch
make</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">*** Raw Makefile build uses CMake. Use CMake directly!
*** e.g.
    mkdir build &amp;&amp; cd build
    cmake .. &amp;&amp; make &amp;&amp; redis-server --loadmodule ./redisearch.so
***
mkdir -p build &amp;&amp; cd build &amp;&amp; cmake .. -DCMAKE_BUILD_TYPE=RelWithDebInfo
-- The C compiler identification is AppleClang 10.0.1.10010046
-- The CXX compiler identification is AppleClang 10.0.1.10010046
...
Scanning dependencies of target metaphone
[  1%] Building C object src/dep/phonetics/CMakeFiles/metaphone.dir/double_metaphone.c.o
[  1%] Built target metaphone
Scanning dependencies of target rscore
[  1%] Building C object CMakeFiles/rscore.dir/src/aggregate/aggregate_exec.c.o
[  2%] Building C object CMakeFiles/rscore.dir/src/aggregate/aggregate_plan.c.o
[  2%] Building C object CMakeFiles/rscore.dir/src/aggregate/aggregate_request.c.o
...
[100%] Built target apistubs
cp build/redisearch.so src
cp build/redisearch.so src/redisearch.so</pre>
                            </figure>
                        </div>           

<p>In CentOS 8 compilation procedure can be slightly different (final test pending for doc):</p>
<div id="example_73_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_73">Copy</span>
                            </div>
                            <pre id="example_73" class="
				code prettyprint
			">cd RediSearch
./deps/readies/bin/getpy2
./system-setup.py
make fetch
make build</pre>
                        </div>
                <p>
                    Copy <code class="em ">build/redisearch.so</code> on the appropiate location where redis will take it on startup.
                </p>
<div id="example_74_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_74">Copy</span>
                            </div>
                            <pre id="example_74" class="
				code prettyprint
			">cp build/redisearch.so /home/redis/bin</pre>
                        </div>

            <div class="row">
                            <h4 class="page-section-title col-11">Start Redis with ReadiSeach</h4>
                        </div>
<div id="example_75_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_75">Copy</span>
                            </div>
                            <pre id="example_75" class="
				code prettyprint
			">redis-server --loadmodule redisearch.so
50239:C 01 Dec 2019 20:52:27.598 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
50239:C 01 Dec 2019 20:52:27.598 # Redis version=5.0.7, bits=64, commit=00000000, modified=0, pid=50239, just started
50239:C 01 Dec 2019 20:52:27.598 # Configuration loaded
50239:M 01 Dec 2019 20:52:27.599 * Increased maximum number of open files to 10032 (it was originally set to 256).
                _._                                                  
           _.-``__ ''-._                                             
      _.-``    `.  `_.  ''-._           Redis 5.0.7 (00000000/0) 64 bit
  .-`` .-```.  ```\/    _.,_ ''-._                                   
 (    '      ,       .-`  | `,    )     Running in standalone mode
 |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379
 |    `-._   `._    /     _.-'    |     PID: 50239
  `-._    `-._  `-./  _.-'    _.-'                                   
 |`-._`-._    `-.__.-'    _.-'_.-'|                                  
 |    `-._`-._        _.-'_.-'    |           http://redis.io        
  `-._    `-._`-.__.-'_.-'    _.-'                                   
 |`-._`-._    `-.__.-'    _.-'_.-'|                                  
 |    `-._`-._        _.-'_.-'    |                                  
  `-._    `-._`-.__.-'_.-'    _.-'                                   
      `-._    `-.__.-'    _.-'                                       
          `-._        _.-'                                           
              `-.__.-'                                               

50239:M 01 Dec 2019 20:52:27.600 # Server initialized
50239:M 01 Dec 2019 20:52:27.951 * &lt;ft&gt; RediSearch version 99.99.99 (Git=v1.6.0-373-gac16a4d8)
50239:M 01 Dec 2019 20:52:27.951 * &lt;ft&gt; Low level api version 1 initialized successfully
50239:M 01 Dec 2019 20:52:27.951 * &lt;ft&gt; concurrent writes: OFF, gc: ON, prefix min length: 2, prefix max expansions: 200, query timeout (ms): 500, timeout policy: return, cursor read size: 1000, cursor max idle (ms): 300000, max doctable size: 1000000, search pool size: 20, index pool size: 8, 
50239:M 01 Dec 2019 20:52:27.951 * &lt;ft&gt; Initialized thread pool!
50239:M 01 Dec 2019 20:52:27.951 * Module 'ft' loaded from redis/redisearch.so
50239:M 01 Dec 2019 20:52:27.951 * Ready to accept connections</pre>
                        </div>            
        
        

        <div class="row">
                            <h3 id="f2e780fdada53c5fefd392cbe5314c6d" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.1.2&nbsp;Indexes</h3>
                        </div>
            
            <div class="row">
                            <h4 class="page-section-title col-11">Minimum query characters</h4>
                        </div>
                <p>
                    We can change the minimum number of characters we allow for prefix queries (e.g. bla* ). Setting it to 1 can hurt performance (default value is 2). <code class="em ">It must be done before the creation of the index.</code>
                </p>
                <div id="example_76_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_76">Copy</span>
                            </div>
                            <pre id="example_76" class="
				code prettyprint
			">FT.CONFIG SET MINPREFIX 3</pre>
                        </div>                
            
    
        <div class="row">
                            <h4 class="page-section-title col-11">Creating an index</h4>
                        </div>
        <p>
            Creates an index with the given spec. The index name will be used in all the key names so keep it short!
        </p>        
            <pre>
FT.CREATE {index} 
    [MAXTEXTFIELDS] [TEMPORARY {seconds}] [NOOFFSETS] [NOHL] [NOFIELDS] [NOFREQS]
    [STOPWORDS {num} {stopword} ...]
    SCHEMA {field} [TEXT [NOSTEM] [WEIGHT {weight}] [PHONETIC {matcher}] | NUMERIC | GEO | TAG [SEPARATOR {sep}] ] [SORTABLE][NOINDEX] ...                
            </pre>
            
<div id="example_77_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_77">Copy</span>
                            </div>
                            <p class="content-title">Creating an index with fields and weights (default weight is 1.0)</p>
                            <pre id="example_77" class="
				code prettyprint
			">FT.CREATE products SCHEMA title TEXT price NUMERIC</pre>
                        </div>       
        
        
        <div class="row">
                            <h4 class="page-section-title col-11">Add documents</h4>
                        </div>
        <p>
            To add documents to and index
        </p>
        <pre>
FT.ADD {index} {docId} {score} 
  [NOSAVE]
  [REPLACE [PARTIAL]]
  [LANGUAGE {language}] 
  [PAYLOAD {payload}]
  [IF {condition}]
  FIELDS {field} {value} [{field} {value}...]
        </pre>

<div id="example_78_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_78">Copy</span>
                            </div>
                            <pre id="example_78" class="
				code prettyprint
			">FT.ADD products prod1 1.0 FIELDS title "Toshiba 32 LCD TV" price 250
FT.ADD products prod2 1.0 FIELDS title "Samsung 42 LCD TV" price 350</pre>
                        </div>            
        
        
        <div class="row">
                            <h4 class="page-section-title col-11">Search</h4>
                        </div>
    <p>
        To perform a search on an index
    </p>
<pre>
FT.SEARCH {index} {query} [NOCONTENT] [VERBATIM] [NOSTOPWORDS] [WITHSCORES] [WITHPAYLOADS] [WITHSORTKEYS]
  [FILTER {numeric_field} {min} {max}] ...
  [GEOFILTER {geo_field} {lon} {lat} {raius} m|km|mi|ft]
  [INKEYS {num} {key} ... ]
  [INFIELDS {num} {field} ... ]
  [RETURN {num} {field} ... ]
  [SUMMARIZE [FIELDS {num} {field} ... ] [FRAGS {num}] [LEN {fragsize}] [SEPARATOR {separator}]]
  [HIGHLIGHT [FIELDS {num} {field} ... ] [TAGS {open} {close}]]
  [SLOP {slop}] [INORDER]
  [LANGUAGE {language}]
  [EXPANDER {expander}]
  [SCORER {scorer}]
  [PAYLOAD {payload}]
  [SORTBY {field} [ASC|DESC]]
  [LIMIT offset num]    
</pre>            
<div id="example_79_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_79">Copy</span>
                            </div>
                            <p class="content-title">Search example 1</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_79" class="
				code prettyprint
			">FT.SEARCH products "lcd tv"</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) (integer) 2
2) "prod2"
3) 1) "title"
   2) "Samsung 42 LCD TV"
   3) "price"
   4) "350"
4) "prod1"
5) 1) "title"
   2) "Toshiba 32 LCD TV"
   3) "price"
   4) "250"</pre>
                            </figure>
                        </div>     

<div id="example_80_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_80">Copy</span>
                            </div>
                            <p class="content-title">Search example 2</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_80" class="
				code prettyprint
			">FT.SEARCH products "lcd tv" FILTER price 300 400</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) (integer) 1
2) "prod2"
3) 1) "title"
   2) "Samsung 42 LCD TV"
   3) "price"
   4) "350"</pre>
                            </figure>
                        </div>
        
        
        <div class="row">
                            <h4 class="page-section-title col-11">Dropping the index</h4>
                        </div>
<div id="example_81_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_81">Copy</span>
                            </div>
                            <pre id="example_81" class="
				code prettyprint
			">FT.DROP products</pre>
                        </div>
        
            
        <div class="row">
                            <h3 id="775a44356c9c35b85c82a3264ed20741" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.1.3&nbsp;Auto-complete suggestions</h3>
                        </div>
    <p>
        The auto-suggest is independent from the search index and needs to be built independently, as you can see.
    </p>
    <pre>
        FT.SUGADD {key} {string} {score} [INCR] [PAYLOAD {payload}]
    </pre>
    <p>
        You have three options:
        <ul>
            <li>Suggestions can have payloads, which can be any string you want, or even whole documents as JSON (they are not searchable though). So just put whatever payload you want for a suggestion.</li>
            <li>The index itself supports prefix searches disconnected from the auto-complete. You can use a prefix query (FT.SEARCH idx "foo*") to search documents containing a prefix.</li>
            <li>Best method: take the top completion suggesion and run that as a search query.</li>
        </ul>
    </p>
<div id="example_82_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_82">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_82" class="
				code prettyprint
			">FT.SUGADD autocomplete "hello world" 100
FT.SUGGET autocomplete "he"</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) "hello world"</pre>
                            </figure>
                        </div>                
            <div class="row">
                            <h4 class="page-section-title col-11">Suggestions length</h4>
                        </div>
                <p>
                    You can query the length of a suggestion index (key).
                </p>
<div id="example_83_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_83">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_83" class="
				code prettyprint
			">FT.SUGLEN autocomplete</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">(integer) 1</pre>
                            </figure>
                        </div>                
            
            
            <div class="row">
                            <h4 class="page-section-title col-11">Drop suggestions</h4>
                        </div>
                <p>
                    To drop a suggestions you should use the <code class="em ">DEL</code> command. The command will return
                    the length of the suggesions deleted. If suggestion index does not exits, it will return 0.
                </p>
<div id="example_84_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_84">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_84" class="
				code prettyprint
			">DEL autocomplete</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">(integer) 1</pre>
                            </figure>
                        </div>                
            
            
            
        
            <div class="row">
                            <h3 id="3189f8499cfbeff1d3aaa556c9688539" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.1.4&nbsp;Aggregations</h3>
                        </div>
                <p>
                    Aggregations are a way to process the results of a search query, group, sort, transform them and extract analytic insights from them.
                </p>
                <div class="row">
                            <h4 class="page-section-title col-11">Core concepts</h4>
                        </div>
                    <p>
                        The basic idea of an aggregate query is this:
                    </p>
                    <ul>
                        <li>Perform a search query, filtering for records you wish to process.</li>
                        <li>
                            Build a pipeline of operations that transform the results by zero or more steps of:
                            <ul>
                                <li>
                        <strong>Group and Reduce</strong>: grouping by fields in the results, and applying reducer functions on each group.</li>
                                <li>
                        <strong>Sort</strong>: sort the results based on one or more fields.</li>
                                <li>
                        <strong>Apply Transformations</strong>: Apply mathematical and string functions on fields in the pipeline, optionally creating new fields or replacing existing ones.</li>
                                <li>
                        <strong>Limit</strong>: Limit the result, regardless of sorting the result.</li>
                                <li>
                        <strong>Filter</strong>: Filter the results (post-query) based on predicates relating to its values.</li>
                            </ul>
                        </li>
                    </ul>
                    <p>
                        The pipeline is dynamic and reentrant, and every operation can be repeated. For example, you can group by property X, sort the top 100 results by group size, then group by property Y and sort the results by some other property, then apply a transformation on the output.
                    </p>
                
                <div class="row">
                            <h4 class="page-section-title col-11">Aggregate request format</h4>
                        </div>
                    <p>
                        The aggregate request's syntax is defined as follows:
                    </p>
<pre>
    FT.AGGREGATE
      {index_name:string}
      {query_string:string}
      [VERBATIM]
      [LOAD {nargs:integer} {property:string} ...]
      [GROUPBY
        {nargs:integer} {property:string} ...
        REDUCE
          {FUNC:string}
          {nargs:integer} {arg:string} ...
          [AS {name:string}]
        ...
      ] ...
      [SORTBY
        {nargs:integer} {string} ...
        [MAX {num:integer}] ...
      ] ...
      [APPLY
        {EXPR:string}
        AS {name:string}
      ] ...
      [FILTER {EXPR:string}] ...
      [LIMIT {offset:integer} {num:integer} ] ...
</pre>
                
                <div class="row">
                            <h4 class="page-section-title col-11">Examples</h4>
                        </div>
                <p>
                    Let's create first the index we will be working on and let's fill it with some documents. Afterwards we shall see some examples.
                </p>
                
<div id="example_85_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_85">Copy</span>
                            </div>
                            <p class="content-title">Create an index</p>
                            <pre id="example_85" class="
				code prettyprint
			">FT.CREATE ptest SCHEMA name TEXT SORTABLE price NUMERIC SORTABLE size TAG  color TAG brand TEXT</pre>
                        </div>
<div id="example_86_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_86">Copy</span>
                            </div>
                            <p class="content-title">Add documents to the index</p>
                            <pre id="example_86" class="
				code prettyprint
			">FT.ADD ptest I00001 1.0 FIELDS name "Boli BIC black"            price 0.8 color "BLACK"          brand "BIC"
FT.ADD ptest I00002 1.0 FIELDS name "Boli BIC blue"             price 0.8 color "BLUE"           brand "BIC"
FT.ADD ptest I00003 1.0 FIELDS name "Boli BIC red"              price 0.8 color "RED"            brand "BIC"
FT.ADD ptest I00004 1.0 FIELDS name "Boli BIC multicolor"       price 3.8 color "BLACK,RED,BLUE" brand "BIC"
FT.ADD ptest I00005 1.0 FIELDS name "Boli Standler punta fina"  price 2.8 color "BLUE"           brand "STANDLER"
FT.ADD ptest I00006 1.0 FIELDS name "Boli Standler punta fina"  price 2.8 color "RED"            brand "STANDLER"
FT.ADD ptest I00007 1.0 FIELDS name "Boli Standler punta fina"  price 2.8 color "GREEN"          brand "STANDLER"
FT.ADD ptest I00008 1.0 FIELDS name "Pilot Gold"                price 5.8 color "GOLD"           brand "PILOT"
FT.ADD ptest I00009 1.0 FIELDS name "Pilot Silver"              price 4.8 color "SILVER"         brand "PILOT"</pre>
                        </div>
<div id="example_87_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_87">Copy</span>
                            </div>
                            <p class="content-title">Return the maximum price of all documents</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_87" class="
				code prettyprint
			">FT.AGGREGATE ptest * GROUPBY 0 REDUCE MAX 1 @price AS max_price</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) (integer) 1
2) 1) "max_price"
   2) "5.8"</pre>
                            </figure>
                        </div>
<div id="example_88_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_88">Copy</span>
                            </div>
                            <p class="content-title">Return the minimum price of all documents</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_88" class="
				code prettyprint
			">FT.AGGREGATE ptest * GROUPBY 0 REDUCE MIN 1 @price AS min_price</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) (integer) 1
2) 1) "min_price"
   2) "0.8"</pre>
                            </figure>
                        </div>
<div id="example_89_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_89">Copy</span>
                            </div>
                            <p class="content-title">Return the total count of all documents</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_89" class="
				code prettyprint
			">FT.AGGREGATE ptest * GROUPBY 0 REDUCE COUNT 0 AS total_count</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) (integer) 1
2) 1) "total_count"
   2) "9"</pre>
                            </figure>
                        </div>
<div id="example_90_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_90">Copy</span>
                            </div>
                            <p class="content-title">Return all distinct brands</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_90" class="
				code prettyprint
			">FT.AGGREGATE ptest * GROUPBY 1 @brand</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) (integer) 3
2) 1) "brand"
   2) "STANDLER"
3) 1) "brand"
   2) "BIC"
4) 1) "brand"
   2) "PILOT"</pre>
                            </figure>
                        </div>
<div id="example_91_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_91">Copy</span>
                            </div>
                            <p class="content-title">Return all distinct colors (considering every color within color property as a single color)</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_91" class="
				code prettyprint
			">FT.AGGREGATE ptest * GROUPBY 1 @color APPlY split(@color) AS dist_color GROUPBY 1 @dist_color</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) (integer) 6
2) 1) "dist_color"
   2) "BLUE"
3) 1) "dist_color"
   2) "RED"
4) 1) "dist_color"
   2) "SILVER"
5) 1) "dist_color"
   2) "GREEN"
6) 1) "dist_color"
   2) "BLACK"
7) 1) "dist_color"
   2) "GOLD"</pre>
                            </figure>
                        </div>
<div id="example_92_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_92">Copy</span>
                            </div>
                            <p class="content-title">Return the result of the query sorted by name</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_92" class="
				code prettyprint
			">FT.AGGREGATE ptest * SORTBY 1 @name</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) (integer) 9
 2) 1) "name"
    2) "boli bic black"
 3) 1) "name"
    2) "boli bic blue"
 4) 1) "name"
    2) "boli bic multicolor"
 5) 1) "name"
    2) "boli bic red"
 6) 1) "name"
    2) "boli standler punta fina"
 7) 1) "name"
    2) "boli standler punta fina"
 8) 1) "name"
    2) "boli standler punta fina"
 9) 1) "name"
    2) "pilot gold"
10) 1) "name"
    2) "pilot silver"</pre>
                            </figure>
                        </div>
                
                <div class="row">
                            <h4 class="page-section-title col-11">Supported GROUPBY reducers</h4>
                        </div>
                    <div class="table-responsive">
                            <table class="table table-bordered table-sm">
                        <thead>
                            <tr>
                                <th>Reducer</th>
                                <th>Format</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>COUNT</td>
                                <td>REDUCE COUNT 0</td>
                                <td>Count the number of records in each group.</td>
                            </tr>
                            <tr>
                                <td>COUNT_DISTINCT</td>
                                <td>REDUCE COUNT_DISTINCT 1 {property}</td>
                                <td>Count the number of distinct values for property.</td>
                            </tr>
                            <tr>
                                <td>COUNT_DISTINCTISH</td>
                                <td>REDUCE COUNT_DISTINCTISH 1 {property}</td>
                                <td>Same as COUNT_DISTINCT - but provide an approximation instead of an exact count, at the expense of less memory and CPU in big groups.</td>
                            </tr>
                            <tr>
                                <td>SUM</td>
                                <td>REDUCE SUM 1 {property}</td>
                                <td>Return the sum of all numeric values of a given property in a group. Non numeric values if the group are counted as 0.</td>
                            </tr>
                            <tr>
                                <td>MIN</td>
                                <td>REDUCE MIN 1 {property}</td>
                                <td>Return the minimal value of a property, whether it is a string, number or NULL.</td>
                            </tr>
                            <tr>
                                <td>MAX</td>
                                <td>REDUCE MAX 1 {property}</td>
                                <td>Return the maximal value of a property, whether it is a string, number or NULL.</td>
                            </tr>
                            <tr>
                                <td>AVG</td>
                                <td>REDUCE AVG 1 {property}</td>
                                <td>Return the average value of a numeric property. This is equivalent to reducing by sum and count, and later on applying the ratio of them as an APPLY step.</td>
                            </tr>
                            <tr>
                                <td>STDDEV</td>
                                <td>REDUCE STDDEV 1 {property}</td>
                                <td>Return the standard deviation of a numeric property in the group.</td>
                            </tr>
                            <tr>
                                <td>QUANTILE</td>
                                <td>REDUCE QUANTILE 2 {property} {quantile}</td>
                                <td>Return the value of a numeric property at a given quantile of the results. Quantile is expressed as a number between 0 and 1.</td>
                            </tr>
                            <tr>
                                <td>TOLIST</td>
                                <td>REDUCE TOLIST 1 {property}</td>
                                <td>Merge all distinct values of a given property into a single array.</td>
                            </tr>
                            <tr>
                                <td>FIRST_VALUE</td>
                                <td>REDUCE FIRST_VALUE {nargs} {property} [BY {property} [ASC|DESC]]</td>
                                <td>Return the first or top value of a given property in the group, optionally by comparing that or another property.</td>
                            </tr>
                            <tr>
                                <td>RANDOM_SAMPLE</td>
                                <td>REDUCE RANDOM_SAMPLE {nargs} {property} {sample_size}</td>
                                <td>Perform a reservoir sampling of the group elements with a given size, and return an array of the sampled items with an even distribution.</td>
                            </tr>
                        </tbody>
                    </table>
                        </div>
                
                <div class="row">
                            <h4 class="page-section-title col-11">APPLY functions</h4>
                        </div>
                    <div class="table-responsive">
                            <table class="table table-bordered table-sm">
                                <h5>
                                    <strong>List of numeric APPLY functions</strong>
                                </h5>
                        <thead>
                            <tr>
                                <th>Function</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>log(x)</td>
                                <td>Return the logarithm of a number, property or sub-expression</td>
                            </tr>
                            <tr>
                                <td>abs(x)</td>
                                <td>Return the absolute number of a numeric expression</td>
                            </tr>
                            <tr>
                                <td>ceil(x)</td>
                                <td>Round to the smallest value not less than x</td>
                            </tr>
                            <tr>
                                <td>floor(x)</td>
                                <td>Round to largest value not greater than x	</td>
                            </tr>
                            <tr>
                                <td>log2(x)</td>
                                <td>Return the logarithm of x to base 2</td>
                            </tr>
                            <tr>
                                <td>exp(x)</td>
                                <td>Return the exponent of x</td>
                            </tr>
                            <tr>
                                <td>sqrt(x)</td>
                                <td>Return the square root of x</td>
                            </tr>
                        </tbody>
                    </table>
                        </div>
                    <div class="table-responsive">
                            <table class="table table-bordered table-sm">
                                <h5>
                                    <strong>List of string APPLY functions</strong>
                                </h5>
                        <thead>
                            <tr>
                                <th>Function</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>upper(s)</td>
                                <td>Return the uppercase conversion of s</td>
                            </tr>
                            <tr>
                                <td>lower(s)</td>
                                <td>Return the lowercase conversion of s</td>
                            </tr>
                            <tr>
                                <td>substr(s, offset, count)</td>
                                <td>Return the substring of s, starting at offset and having count characters. 
If offset is negative, it represents the distance from the end of the string. 
If count is -1, it means "the rest of the string starting at offset".</td>
                            </tr>
                            <tr>
                                <td>format( fmt, ...)</td>
                                <td>Use the arguments following fmt to format a string. 
Currently the only format argument supported is %s and it applies to all types of arguments.</td>
                            </tr>
                            <tr>
                                <td>matched_terms([max_terms=100])	</td>
                                <td>Return the query terms that matched for each record (up to 100), as a list. If a limit is specified, we will return the first N matches we find - based on query order.</td>
                            </tr>
                            <tr>
                                <td>split(s, [sep=","], [strip=" "])</td>
                                <td>Split a string by any character in the string sep, and strip any characters in strip. If only s is specified, we split by commas and strip spaces. The output is an array.</td>
                            </tr>
                        </tbody>
                    </table>
                        </div>
                    <div class="table-responsive">
                            <table class="table table-bordered table-sm">
                                <h5>
                                    <strong>List of date/time APPLY functions</strong>
                                </h5>
                        <thead>
                            <tr>
                                <th>Function</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>timefmt(x, [fmt])</td>
                                <td>Return a formatted time string based on a numeric timestamp value x.</td>
                            </tr>
                            <tr>
                                <td>parsetime(timesharing, [fmt])</td>
                                <td>The opposite of timefmt() - parse a time format using a given format string.</td>
                            </tr>
                            <tr>
                                <td>day(timestamp)</td>
                                <td>Round a Unix timestamp to midnight (00:00) start of the current day.</td>
                            </tr>
                            <tr>
                                <td>hour(timestamp)</td>
                                <td>Round a Unix timestamp to the beginning of the current hour.</td>
                            </tr>
                            <tr>
                                <td>minute(timestamp)</td>
                                <td>Round a Unix timestamp to the beginning of the current minute.</td>
                            </tr>
                            <tr>
                                <td>month(timestamp)</td>
                                <td>Round a unix timestamp to the beginning of the current month.</td>
                            </tr>
                            <tr>
                                <td>dayofweek(timestamp)</td>
                                <td>Convert a Unix timestamp to the day number (Sunday = 0).</td>
                            </tr>
                            <tr>
                                <td>dayofmonth(timestamp)</td>
                                <td>Convert a Unix timestamp to the day of month number (1 .. 31).</td>
                            </tr>
                            <tr>
                                <td>dayofyear(timestamp)</td>
                                <td>Convert a Unix timestamp to the day of year number (0 .. 365).</td>
                            </tr>
                            <tr>
                                <td>year(timestamp)</td>
                                <td>Convert a Unix timestamp to the current year (e.g. 2018).</td>
                            </tr>
                            <tr>
                                <td>monthofyear(timestamp)</td>
                                <td>Convert a Unix timestamp to the current month (0 .. 11).</td>
                            </tr>
                        </tbody>
                    </table>
                        </div>
                
            
        
        <div class="row">
                            <h3 id="6073348fd21dafbec7d3ead684f58c04" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.1.5&nbsp;Synonyms</h3>
                        </div>
                <p>
                    <a href="https://redis.io/" target="_blank">Redis</a> allows the use of synonym words for the searches. These synonyms are stored in a synonyms data structure. 
                    The synonym data structure is a set of gorups, with each gorup containing a list of words, which are synonyms.
                    An example of such structure is: 
                </p>
<pre>
    {boy, child, baby}
    {girl, child, baby}
    {man, adult, person}
</pre>
                <p>
                    When searching in <a href="https://redis.io/" target="_blank">Redis</a> with FT.SEARCH, any matching words in the synonym list will be returned as result, as well as the original word. 
                    Using the synonyms table the search of the term 'child', which is not in the table, gives: 
                </p>
                <div id="example_93_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_93">Copy</span>
                            </div>
                            <p class="content-title">Redis search using synonyms</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_93" class="
				code prettyprint
			">FT.SEARCH table child</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">1) (integer) 2
2) "index1"
3) 1) "name"
   2) "boy"
4) "index2"
5) 1) "name"
   2) "girl"</pre>
                            </figure>
                        </div>
                <p>
                As seen, when the synonyms data structure contains a given group of synonyms, performing a query will return any document that contains a synonym in the list.
                </p>
                
            <div class="row">
                            <h4 class="page-section-title col-11">Adding synonyms</h4>
                        </div>
                <p>In order to add synonyms to the index, the command FT.SYNADD is used. the syntax of this command is as follows:</p>
<pre>
    FT.SYNADD &lt;index name&gt; &lt;term1&gt; &lt;term2&gt; ...
</pre>
                <p>The command adds the given synonyms, passed on as individual strings, to the table (&lt; index name&gt;). 
                It ouputs the index of the synonyms group, in order to use it later if the list wants to be updated.</p>
               
                
                <p>It is to note that <strong>only the documents indexed after the addition of the synonyms will be affected by these</strong>. 
                Therefore, a document added after <strong>will not</strong> be included in the search if synonyms want do be used.
                </p>

                <div id="example_94_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_94">Copy</span>
                            </div>
                            <p class="content-title">Example of synonyms addition</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_94" class="
				code prettyprint
			">FT.SYNADD table boy child baby</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">(integer) 0</pre>
                            </figure>
                        </div>
                
        
        
            <div class="row">
                            <h4 class="page-section-title col-11">Updating synonyms</h4>
                        </div>
                <p>Synonym groups can be updated with new words. Words cannot be removed from a synonym group. The command used to add new words to a synonyms group is FT.SYNUPDATE, as seen below.</p>
<pre>
    FT.SYNUPDATE &lt;index name&gt; &lt;synonym group id&gt; &lt;term1&gt; &lt;term2&gt; ...
</pre>
                <p>The command updates the according synonym group, adding the given words.</p>
                
                <p>As with SYNADD, <strong>only the documents indexed after the addition of new words will be affected by these</strong>. 
                This means that new words of the synonym group will only be taken into account for documents indexed after these new words are added to the synonyms group.
                </p>

                <div id="example_95_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_95">Copy</span>
                            </div>
                            <p class="content-title">Example of synonyms update</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_95" class="
				code prettyprint
			">FT.SYNADD table boy child baby
FT.SYNUPDATE table 0 man</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">(integer) 0 
OK</pre>
                            </figure>
                        </div>
                
            
            
            
            <div class="row">
                            <h4 class="page-section-title col-11">Viewing all the synonym groups</h4>
                        </div>
                <p>If one desires to see the synonym groups that are stored in the synonyms data structure at any given time, the commad FT.SYNDUMP can be used, as follows.</p>
<pre>
    FT.SYNDUMP &lt;index name&gt;
</pre>
                <p>The command returns a list of the separate synonym words, along with the respective group id, of all the synonym groups the word belongs to.</p>
                

                <div id="example_96_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_96">Copy</span>
                            </div>
                            <p class="content-title">Example of synonyms dump</p>
                            <pre style="border-bottom-right-radius: 0;" id="example_96" class="
				code prettyprint
			">FT.SYNADD table boy child baby
FT.SYNADD table girl child baby
FT.SYNUPDATE table 0 man
FT.SYNDUMP table</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">(integer) 0
(integer) 1
OK
1) "man"
2) 1) (integer) 0
3) "girl"
4) 1) (integer) 1
5) "baby"
6) 1) (integer) 0
   2) (integer) 1
7) "child"
8) 1) (integer) 0
   2) (integer) 1
9) "boy"
10) 1) (integer) 0</pre>
                            </figure>
                        </div>
                
            
            
        
        
        
        
        
        
        
        <div class="row">
                            <h2 id="da75fe439e82fc8ce64786101d1d7c5b" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.2&nbsp;Redis ML</h2>
                        </div>
                
            <p>
               RedisML is a <a href="https://redis.io/" target="_blank">Redis</a> module that implements several machine learning models as <a href="https://redis.io/" target="_blank">Redis</a> data types.
            </p>
            <p>
                The stored models are fully operational and support the prediction/evaluation process.
            </p>
            <p>
                RedisML is a turnkey solution for using trained models in a production environment. Load ML models from any platform, immediately ready to serve.
                Primary Features
                <ul>
                    <li>Decision Tree ensembles (random forests) classification and regression</li>
                    <li>Linear regression</li>
                    <li>Logistic regression</li>
                    <li>Matrix operations</li>
                </ul>
            </p>
            
            <p>
                You can read more on <a href="https://oss.redislabs.com/redisml/" target="_blank">Redis ML</a>
                <ul>
                    <li>
                    <a href="https://redislabs.com/blog/introduction-redis-ml/" target="_blank">An Introduction to Redis-ML. Part One</a>
                </li>
                    <li>
                    <a href="https://redislabs.com/blog/introduction-redis-ml-part-two/" target="_blank">An Introduction to Redis-ML. Part Two</a>
                </li>
                    <li>
                    <a href="https://redislabs.com/blog/introduction-redis-ml-part-three/" target="_blank">An Introduction to Redis-ML. Part Tree (Fisher Iris Plant Data Set)</a>
                </li>
                    <li>
                    <a href="https://redislabs.com/blog/introduction-redis-ml-part-four/" target="_blank">An Introduction to Redis-ML. Part Four</a>
                </li>
                    <li>
                    <a href="https://redislabs.com/blog/introduction-redis-ml-part-five/" target="_blank">An Introduction to Redis-ML. Part Five (Titanic)</a>
                </li>
                    <li>
                    <a href="https://redislabs.com/blog/introduction-redis-ml-part-six/" target="_blank">An Introduction to Redis-ML. Part Six</a>
                </li>
                <li>
                    <a href="https://databricks-prod-cloudfront.cloud.databricks.com/public/4027ec902e239c93eaaa8714f173bcfc/1798786150176123/1558217409549743/3618054400409050/latest.html" target="_blank">Spark Redis ML Recommender System</a>
                </li>
                </ul>
            </p>


            <div class="bs-callout bs-callout-info text-justify">            
                <p>
                    You can also read <a href="/mediaContent/Databases.30/Redis/media/Guide-to-Recommendations-using-Redis.pdf" target="_blank">Guide to Recommendations System using Redis</a>
                    to understand how to build a Recommendations System with non ML commands.
                </p>
            </div>
            
            <div class="row">
                            <h3 id="db355c6a5de419c1008d9a16a88902af" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.2.1&nbsp;Installing RedisML</h3>
                        </div>
                <p>
                    Download RedisML source code 
                </p>
<div id="example_97_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_97">Copy</span>
                            </div>
                            <pre style="border-bottom-right-radius: 0;" id="example_97" class="
				code prettyprint
			">$ git clone https://github.com/RedisLabsModules/redisml.git    
$ cd redisml
$ ls</pre>
                            <figure class="highlight">
                                <pre id="" class="
				code prettyprint
			">-rw-r--r--   1 jet  staff    692 Dec  3 18:50 Dockerfile
-rw-r--r--   1 jet  staff   5794 Dec  3 18:50 LICENSE
-rw-r--r--   1 jet  staff    373 Dec  3 18:50 Makefile
-rw-r--r--   1 jet  staff  11906 Dec  3 18:50 README.md
drwxr-xr-x   8 jet  staff    256 Dec  3 18:50 docs
-rw-r--r--   1 jet  staff    707 Dec  3 18:50 mkdocs.yml
-rw-r--r--   1 jet  staff    401 Dec  3 18:50 ramp.yml
drwxr-xr-x  43 jet  staff   1376 Dec  3 19:16 src</pre>
                            </figure>
                        </div>                    
        
            <div class="row">
                            <h4 class="page-section-title col-11">Compile on MAC OS</h4>
                        </div>
                <p>
                    To compile RedisML on MAC
                </p>

            <ul>
                 <li>
                   Install <a href="http://www.netlib.org/blas/" target="_blank">BLAS</a> (Basic Linear Algebra Subprograms)
<div id="example_98_wrapping" style="margin-top: -1px" class="collapse show">
                                    <div class="zero-clipboard">
                                        <span class="btn-clipboard" data-clipboard-target="#example_98">Copy</span>
                                    </div>
                                    <pre id="example_98" class="
				code prettyprint
			">$ brew install openblas</pre>
                                </div>         
                </li>
                <li>
                    <p>
                    Config redisml/src/Makefile to allow MAC OS gcc finds BLAS includes by setting
                    </p>
<pre>
CFLAGS = -I$(RM_INCLUDE_DIR) -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/

add openblas include

CFLAGS = -I$(RM_INCLUDE_DIR) -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/ -I/usr/local/Cellar/openblas/0.3.7/include/    
</pre>                    
                </li>
            
                <li>
                    Compile RedisML
<div id="example_99_wrapping" style="margin-top: -1px" class="collapse show">
                                    <div class="zero-clipboard">
                                        <span class="btn-clipboard" data-clipboard-target="#example_99">Copy</span>
                                    </div>
                                    <pre style="border-bottom-right-radius: 0;" id="example_99" class="
				code prettyprint
			">$ ce redisml    
$ make</pre>
                                    <figure class="highlight">
                                        <pre id="" class="
				code prettyprint
			">/Library/Developer/CommandLineTools/usr/bin/make -C ./src all
echo "making rmutil" &amp;&amp; cd rmutil &amp;&amp; /Library/Developer/CommandLineTools/usr/bin/make all
making rmutil
gcc -g -fPIC -O3 -std=gnu99 -Wall -Wno-unused-function -I../   -c -o util.o util.c
gcc -g -fPIC -O3 -std=gnu99 -Wall -Wno-unused-function -I../   -c -o strings.o strings.c
gcc -g -fPIC -O3 -std=gnu99 -Wall -Wno-unused-function -I../   -c -o sds.o sds.c
gcc -g -fPIC -O3 -std=gnu99 -Wall -Wno-unused-function -I../   -c -o vector.o vector.c
gcc -g -fPIC -O3 -std=gnu99 -Wall -Wno-unused-function -I../   -c -o alloc.o alloc.c
gcc -g -fPIC -O3 -std=gnu99 -Wall -Wno-unused-function -I../   -c -o periodic.o periodic.c
ar rcs librmutil.a util.o strings.o sds.o vector.o alloc.o periodic.o
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o redis-ml.o redis-ml.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o rmalloc.o rmalloc.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o forest.o forest.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o forest-type.o forest-type.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o feature-vec.o feature-vec.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o reg.o reg.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o regression-type.o regression-type.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o matrix.o matrix.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o matrix-type.o matrix-type.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o kmeans.o kmeans.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o kmeans-type.o kmeans-type.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o util/logging.o util/logging.c
gcc -I. -Wall -g -fPIC -O2 -std=gnu99 -pthread -I/usr/local/Cellar/openblas/0.3.7/include/   -c -o util/thpool.o util/thpool.c
ld -o redis-ml.so redis-ml.o rmalloc.o forest.o forest-type.o feature-vec.o reg.o regression-type.o matrix.o matrix-type.o kmeans.o kmeans-type.o util/logging.o util/thpool.o -bundle -undefined dynamic_lookup -framework Accelerate  -Lrmutil -lrmutil -lc</pre>
                                    </figure>
                                </div>                    
                </li>
            </ul>
            
            <div class="bs-callout bs-callout-success text-justify">
                <p>
                    Now you have <code class="em ">redis-ml.so</code> compiled in src directory.
                </p>
                
            </div>
            
        
            <div class="row">
                            <h3 id="b261e5ad48a1e486bcfef02833474c39" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.2.2&nbsp;Compile on CentOS 8</h3>
                        </div>
                <p>
                    To compile RedisML on CentOS 8
                </p>

            <ul>
                 <li>
                   Install <a href="http://www.netlib.org/blas/" target="_blank">BLAS</a> (Basic Linear Algebra Subprograms)
<div id="example_100_wrapping" style="margin-top: -1px" class="collapse show">
                                    <div class="zero-clipboard">
                                        <span class="btn-clipboard" data-clipboard-target="#example_100">Copy</span>
                                    </div>
                                    <pre id="example_100" class="
				code prettyprint
			">sudo dnf install -y atlas-devel atlas
ln -s /usr/lib64/atlas/libsatlas.so /usr/lib64/libatlas.a
ln -s /usr/lib64/atlas/libtatlas.so /usr/lib64/libcblas.a</pre>
                                </div>         
                </li>
                <li>
                    <p>
                    Compile RedisML
                    </p>
<div id="example_101_wrapping" style="margin-top: -1px" class="collapse show">
                                    <div class="zero-clipboard">
                                        <span class="btn-clipboard" data-clipboard-target="#example_101">Copy</span>
                                    </div>
                                    <pre id="example_101" class="
				code prettyprint
			">$ cd redisml    
$ make</pre>
                                </div>
                </li>
            </ul>
        
        
        <div class="row">
                            <h3 id="70660b0f11b098656b7f551713bef194" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.2.3&nbsp;Start Redis with ReadiML</h3>
                        </div>
<div id="example_102_wrapping" style="margin-top: -1px" class="collapse show">
                            <div class="zero-clipboard">
                                <span class="btn-clipboard" data-clipboard-target="#example_102">Copy</span>
                            </div>
                            <pre id="example_102" class="
				code prettyprint
			">$ redis-server --loadmodule redis-ml.so</pre>
                        </div>            
        
        
        
        
        
        <div class="row">
                            <h2 id="efae0af5d7ccf7571d97adfdecde1eb8" class="page-section-title overflow-x-ellipsis overflow-y-hidden col-11">12.3&nbsp;Neural Redis</h2>
                        </div>
            <p>
                <a href="https://github.com/antirez/neural-redis" target="_blank">Neural Redis</a> is a <a href="https://redis.io/" target="_blank">Redis</a> loadable module that implements 
                feed forward neural networks as a native data type for <a href="https://redis.io/" target="_blank">Redis</a>. The project goal is to provide <a href="https://redis.io/" target="_blank">Redis</a> users with 
                an extremely simple to use machine learning experience.
            </p>
        
        </div>
                    <div role="complementary" class="col-lg-3 bs-docs-sidebar bs-docs-sidebar-scroll sticky">
                        <ul class="nav bs-docs-sidenav flex-column">
                            <li class="nav-item">
                                <a data-href="27be90ddb8e2f6069d75dccfa4c0946e" href="#27be90ddb8e2f6069d75dccfa4c0946e" class="nav-link doc-section-menu-link">1. Install</a>
                                <ul class="nav">
                                    <li class="nav-item">
                                        <a href="#c2ca257c6ff4045afdd5d3d1c1e52128" class="nav-link">1.1. Install on MAC OS</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#7cb9252939020c0d381d66a1a83f9eff" class="nav-link">1.2. Install on Linux</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#eb61e448cc3c555b4caa3a866f8ee5a9" class="nav-link">1.3. Configure operating system parameters</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#0068fe0b1d71de72e38f1ad4196d3537" class="nav-link">1.4. Install extensions</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a data-href="d87c779cadc6bde102831b8223628ff9" href="#d87c779cadc6bde102831b8223628ff9" class="nav-link doc-section-menu-link">2. Configure</a>
                            </li>
                            <li class="nav-item">
                                <a data-href="4153fce22b0312dd9bc476bd68528d0d" href="#4153fce22b0312dd9bc476bd68528d0d" class="nav-link doc-section-menu-link">3. Start and Stop Redis</a>
                                <ul class="nav">
                                    <li class="nav-item">
                                        <a href="#d54a42fcdc9deea613e0cd255a655d5c" class="nav-link">3.1. Command Line Start and Stop</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#fd06adb838367f0fcb97fa65ac31216a" class="nav-link">3.2. Start Redis as a service in MacOS</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#6f4e35af64caf1a09dbf1563bdc1dde0" class="nav-link">3.3. Start Redis as a service in Linux</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a data-href="c50c8440527dd7df6f0603318e5f4dbd" href="#c50c8440527dd7df6f0603318e5f4dbd" class="nav-link doc-section-menu-link">4. Test Redis</a>
                            </li>
                            <li class="nav-item">
                                <a data-href="909ee5ebb4180dc87981ffaf057d2767" href="#909ee5ebb4180dc87981ffaf057d2767" class="nav-link doc-section-menu-link">5. Securing Redis</a>
                            </li>
                            <li class="nav-item">
                                <a data-href="e1fa3552e2b781214b5b8433eea3e147" href="#e1fa3552e2b781214b5b8433eea3e147" class="nav-link doc-section-menu-link">6. Persistence</a>
                                <ul class="nav">
                                    <li class="nav-item">
                                        <a href="#3dcbfdb3789da9430af051c59c3ad5db" class="nav-link">6.1. Snapshot persistence aka RDB</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#426af64c52c551cad66a2c21ed634d3d" class="nav-link">6.2. Strong persistence aka AOF</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#6475605bed9318fa5152a1652bdc0b55" class="nav-link">6.3. Which persistence mode should I use ?</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#4f939a9e7460d04635516650a0dbf339" class="nav-link">6.4. Cache mode</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a data-href="aa6ed0ec6f94c5bebd68e372fd4aa9b3" href="#aa6ed0ec6f94c5bebd68e372fd4aa9b3" class="nav-link doc-section-menu-link">7. Redis Cluster</a>
                                <ul class="nav">
                                    <li class="nav-item">
                                        <a href="#7d836e593c0036d3537c783cd424648b" class="nav-link">7.1. Creating and using a Redis Cluster</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#bcd670bcd5eef421f367aea5705c6f83" class="nav-link">7.2. Redis Cluster master-slave model</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#f1ee445785f41b1cd6b67b82417c7157" class="nav-link">7.3. Create sentinel systemd service</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#9d885ac56dedacdf658605c4f0be71c9" class="nav-link">7.4. Verify configuration is working</a>
                                        <ul class="nav">
                                            <li class="nav-item">
                                                <a href="#a679c9d7665df504ed9eee8d23ee1b4f" class="nav-link">7.4.1. Verify replication is working</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#9d61b57ff9cd6d44b1b5caf18c7196fc" class="nav-link">7.4.2. Verify sentinel is working</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a data-href="42e1a93062895e0f852af9175f7cf18e" href="#42e1a93062895e0f852af9175f7cf18e" class="nav-link doc-section-menu-link">8. Using redis-cli</a>
                                <ul class="nav">
                                    <li class="nav-item">
                                        <a href="#6b7063d55a5a923e6f50290d7a6ce230" class="nav-link">8.1. Setting key values</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#ce7c1a3bc3a9ab3b3e9cf5b799482d66" class="nav-link">8.2. Getting key values</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#d6d4a095b406e73f2c61d860a4fec9c4" class="nav-link">8.3. Retrieving all existing keys</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#eae62e514374ce8d8778ee0870d1df75" class="nav-link">8.4. Mass insertion</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#417690dbf15a6a99b4107a54f7f8feab" class="nav-link">8.5. Delete all keys</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a data-href="d638e4dd68fba3669fd9d73b19e50712" href="#d638e4dd68fba3669fd9d73b19e50712" class="nav-link doc-section-menu-link">9. Data types</a>
                                <ul class="nav">
                                    <li class="nav-item">
                                        <a href="#ee7f836feddc2fb19d6dd15696809f94" class="nav-link">9.1. Keys</a>
                                        <ul class="nav">
                                            <li class="nav-item">
                                                <a href="#f818da2e7e37a706f956871ed2293971" class="nav-link">9.1.1. Key TTL</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#877aba3b6c888e65891dc37f47906f90" class="nav-link">9.1.2. Delete a key</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#704532b19d8d1b998bd394a207ea10ae" class="nav-link">9.2. Strings</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#3cf3430a734c36496495f91242416cbf" class="nav-link">9.3. Lists</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#6e12684b4ecc9c7b18e090b3169f8c54" class="nav-link">9.4. Sets</a>
                                        <ul class="nav">
                                            <li class="nav-item">
                                                <a href="#3377dba182319e7bb3ed24112c5d49f2" class="nav-link">9.4.1. Difference between two sets</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#44a88b89509edec935c624e28459d0a1" class="nav-link">9.4.2. Union of two sets</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#1fefee3b32f0cb3d3faed2b6d052c49e" class="nav-link">9.4.3. Union of two sets into third set</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#230025eb06bd68a0ceaac2e4ed7c2379" class="nav-link">9.4.4. Get random member of a set</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#12f8e08c14787a90f68eea22cf989e85" class="nav-link">9.5. Sorted Sets</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#ec2d226c1071fa85ade127b07c7013e3" class="nav-link">9.6. Hashes</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#d26125a66c746796758030682b09e177" class="nav-link">9.7. Bitmaps</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#3661b4b2e548523ddc7e5ba3b98ad89e" class="nav-link">9.8. Streams</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#12df496734ae6bd78622f4bb1d59a199" class="nav-link">9.9. HyperLogLogs</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a data-href="421d8bc83ed776c4699b064d0a1e3e27" href="#421d8bc83ed776c4699b064d0a1e3e27" class="nav-link doc-section-menu-link">10. Redis for application support</a>
                                <ul class="nav">
                                    <li class="nav-item">
                                        <a href="#ad303379f8c6122c5ae49145d8408190" class="nav-link">10.1. Counters</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#5a5241ee0ffda0c3f1ab3febaf2ca893" class="nav-link">10.2. Top visited pages</a>
                                        <ul class="nav">
                                            <li class="nav-item">
                                                <a href="#93c0ea1c9e6bd609dded9b24b98ed19e" class="nav-link">10.2.1. Keep range limited</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#86d718d1f5d61370c70c20f2656c6651" class="nav-link">10.2.2. Delete the range</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a data-href="4642dadf2fc2dd064d7cc2971704c0ea" href="#4642dadf2fc2dd064d7cc2971704c0ea" class="nav-link doc-section-menu-link">11. Monitoring redis</a>
                                <ul class="nav">
                                    <li class="nav-item">
                                        <a href="#6e3b1321c69bb82b4bfd683a17bedb35" class="nav-link">11.1. Scanning for big keys</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#3f9be5bf5f853165bf0f27943c29e3ee" class="nav-link">11.2. Monitoring commands executed in Redis</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a data-href="589232e85dfa26f2270fee313efa40b5" href="#589232e85dfa26f2270fee313efa40b5" class="nav-link doc-section-menu-link">12. Extensions</a>
                                <ul class="nav">
                                    <li class="nav-item">
                                        <a href="#9301914eb4e491fb54023c1854c6464c" class="nav-link">12.1. RediSearch</a>
                                        <ul class="nav">
                                            <li class="nav-item">
                                                <a href="#cebe6b976eb71c9cb7dd392a8ab5793e" class="nav-link">12.1.1. Install</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#f2e780fdada53c5fefd392cbe5314c6d" class="nav-link">12.1.2. Indexes</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#775a44356c9c35b85c82a3264ed20741" class="nav-link">12.1.3. Auto-complete suggestions</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#3189f8499cfbeff1d3aaa556c9688539" class="nav-link">12.1.4. Aggregations</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#6073348fd21dafbec7d3ead684f58c04" class="nav-link">12.1.5. Synonyms</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#da75fe439e82fc8ce64786101d1d7c5b" class="nav-link">12.2. Redis ML</a>
                                        <ul class="nav">
                                            <li class="nav-item">
                                                <a href="#db355c6a5de419c1008d9a16a88902af" class="nav-link">12.2.1. Installing RedisML</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#b261e5ad48a1e486bcfef02833474c39" class="nav-link">12.2.2. Compile on CentOS 8</a>
                                            </li>
                                            <li class="nav-item">
                                                <a href="#70660b0f11b098656b7f551713bef194" class="nav-link">12.2.3. Start Redis with ReadiML</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#efae0af5d7ccf7571d97adfdecde1eb8" class="nav-link">12.3. Neural Redis</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div role="dialog" id="graph-modal" class="modal fade">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content mx-auto">
                        <div class="modal-header">
                            <h3>&nbsp;</h3>
                            <button aria-label="Close" data-dismiss="modal" class="close" type="button">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">&nbsp;</div>
                    </div>
                </div>
            </div>
            <script src="/static/assets/bootstrap/js/jquery-3.4.1.js?v=1545" type="text/javascript"> </script>
            <script src="https://code.jquery.com/jquery-migrate-3.1.0.js"> </script>
            <script src="/static/assets/dropzone/dropzone.js?v=1545" type="text/javascript"> </script>
            <script src="/static/assets/clipboard/dist/clipboard.min.js?v=1545" type="text/javascript"> </script>
            <script src="/static/deister/js/deister-dropzone.js?v=1545" type="text/javascript"> </script>
            <script src="/static/deister/js/deister-url-utils.js?v=1545" type="text/javascript"> </script>
            <script src="/static/deister/js/deister-date.js?v=1545" type="text/javascript"> </script>
            <script src="/static/deister/js/deister-link.js?v=1545" type="text/javascript"> </script>
            <script src="/static/deister/js/deister-display-locked-files.js?v=1545" type="text/javascript"> </script>
            <script type="text/javascript">
            $(document).ready(function() {

				

                new Clipboard("#copy-path", {
                    text: function(trigger) {
                        return urlUtils.getSanitizedPathNameToCopy();
                    }
                });

                

                $(".print-pdf-document a").on("click",function(e) {
                    e.preventDefault();
                });

                $(".print-pdf-document").on("click",function(e){
                    var urlUtils        = new urlUtilsClass(),
                        pathname        = removeContentPrefix(urlUtils.getSanitizedParentPathName()),
                        filename        = urlUtils.getSanitizedFileName(),
						pageDebugValue = $(e.currentTarget).attr("data-page-debug"),
						pageDebug      = pageDebugValue === "fop" ? "?debug=" + pageDebugValue : "",
                        pdfFileName     = urlUtils.getSanitizedPDFFileName(),
                        pageLayoutValue = $(e.currentTarget).attr("data-page-layout"),
                        pageLayout      = pageLayoutValue === "single" ?
                                            "?pageLayout=" + pageLayoutValue :
                                            "";

                    window.open("/rest/pdf" + pathname + pdfFileName + pageLayout + pageDebug);
                });

                $(".print-pdf-folder").on("click",function(e){
                    var urlUtils        = new urlUtilsClass(),
                        pathname        = removeContentPrefix(urlUtils.getSanitizedPDFParentPathName()),
						pageDebugValue = $(e.currentTarget).attr("data-page-debug"),
						pageDebug      = pageDebugValue === "fop" ? "?debug=" + pageDebugValue : "",
                        pageLayoutValue = $(e.currentTarget).attr("data-page-layout"),
                        pageLayout      = pageLayoutValue === "single" ? "?pageLayout=" + pageLayoutValue : "";

                    window.open("/rest/pdf/folder" + pathname + pageLayout + pageDebug);
                });
            });


			function removeContentPrefix(path) {
				if (path != null) {
					if (path.startsWith('/content')) {
						return path.replace('/content','');
					} else {
						return path;
					}
				} else {
					return null;
				}
			}
        </script>
        </div>
        <footer role="contentinfo" style="z-index: 400;" id="document-footer">
            <div class="new-footer" style="font-size: 12px; padding: 80px 12% 80px 20%; background-color: #333;">
                <h6 style="margin-bottom: 10px">
                    <a target="_top" style="color: white;" href="/">HOME</a>
                </h6>
                <div style="flex-wrap: wrap; display: flex">
                    <div style="padding-left: 0" class="
                                col-12
                                 col-sm-6 col-md-4 col-lg-3 ">
                        <a target="_top" style="font-weight: unset; color: white;" href="/content/Axional business products.5">Axional business products</a>
                        <ul id="footerSubFilesList" style="
                                        list-style: none;
                                        padding-left: 0;
                                        padding-bottom: 25px;
                                        ">
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional business products.5/Axional Tiny CRM.30">Axional Tiny CRM</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional business products.5/Axional OCR.40">Axional OCR</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional business products.5/Axional Projects.50">Axional Projects</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional business products.5/Axional Terminal 2020.71">Axional Terminal 2020</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional business products.5/Axional Terminal.80">Axional Terminal</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional business products.5/Axional OLAP.90">Axional OLAP</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional business products.5/Axional Docs.100">Axional Docs</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional business products.5/Axional Mobile.120">Axional Mobile</a>
                            </li>
                        </ul>
                    </div>
                    <div style="padding-left: 0" class="
                                col-12
                                 col-sm-6 col-md-4 col-lg-3 ">
                        <a target="_top" style="font-weight: unset; color: white;" href="/content/Axional development tools.15">Axional development tools</a>
                        <ul id="footerSubFilesList" style="
                                        list-style: none;
                                        padding-left: 0;
                                        padding-bottom: 25px;
                                        ">
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional development tools.15/Axional Studio.4">Axional Studio</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional development tools.15/Axional Frontend.16">Axional Frontend</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional development tools.15/Axional DB Studio">Axional DB Studio</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional development tools.15/Axional Microservices">Axional Microservices</a>
                            </li>
                        </ul>
                    </div>
                    <div style="padding-left: 0" class="
                                col-12
                                 col-sm-6 col-md-4 col-lg-3 ">
                        <a target="_top" style="font-weight: unset; color: white;" href="/content/Axional development libraries.20">Axional development libraries</a>
                        <ul id="footerSubFilesList" style="
                                        list-style: none;
                                        padding-left: 0;
                                        padding-bottom: 25px;
                                        ">
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional development libraries.20/Studio J2EE Server.4">Studio J2EE Server</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional development libraries.20/Server side javascript.50">Server side javascript</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Axional development libraries.20/SOAP.80">SOAP</a>
                            </li>
                        </ul>
                    </div>
                    <div style="padding-left: 0" class="
                                col-12
                                 col-sm-6 col-md-4 col-lg-3 ">
                        <a target="_top" style="font-weight: unset; color: white;" href="/content/Resources.27">Resources</a>
                        <ul id="footerSubFilesList" style="
                                        list-style: none;
                                        padding-left: 0;
                                        padding-bottom: 25px;
                                        ">
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Resources.27/ES SII.2">ES SII</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Resources.27/ES FACE-Facturae.xml">ES FACE-Facturae</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Resources.27/PT SAFT.xml">PT SAFT</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Resources.27/SEPA.xml">SEPA</a>
                            </li>
                        </ul>
                    </div>
                    <div style="padding-left: 0" class="
                                col-12
                                 col-sm-6 col-md-4 col-lg-3 ">
                        <a target="_top" style="font-weight: unset; color: white;" href="/content/Databases.30">Databases</a>
                        <ul id="footerSubFilesList" style="
                                        list-style: none;
                                        padding-left: 0;
                                        padding-bottom: 25px;
                                        ">
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/IBM Informix.2">IBM Informix</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/IBM Informix Grid.3">IBM Informix Grid</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/IBM Informix IWA.4">IBM Informix IWA</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/IBM DB2.6.xml">IBM DB2</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/Accumulo.8">Accumulo</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/Oracle.8">Oracle</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/Cassandra.10">Cassandra</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/Derby.20">Derby</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/TPCH Benchmark.90">TPCH Benchmark</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/MySQL.xml">MySQL</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Databases.30/Redis">Redis</a>
                            </li>
                        </ul>
                    </div>
                    <div style="padding-left: 0" class="
                                col-12
                                 col-sm-6 col-md-4 col-lg-3 ">
                        <a target="_top" style="font-weight: unset; color: white;" href="/content/IDE Tools.40">IDE Tools</a>
                        <ul id="footerSubFilesList" style="
                                        list-style: none;
                                        padding-left: 0;
                                        padding-bottom: 25px;
                                        ">
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/IDE Tools.40/Bitbucket.xml">Bitbucket</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/IDE Tools.40/Eclipse for Java.xml">Eclipse for Java</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/IDE Tools.40/Eclipse for Javascript.xml">Eclipse for Javascript</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/IDE Tools.40/Git.xml">Git</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/IDE Tools.40/IntelliJ Setup.xml">IntelliJ Setup</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/IDE Tools.40/Java SDK">Java SDK</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/IDE Tools.40/Mercurial.xml">Mercurial</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/IDE Tools.40/WebPack Setup.xml">WebPack Setup</a>
                            </li>
                        </ul>
                    </div>
                    <div style="padding-left: 0" class="
                                col-12
                                 col-sm-12 col-md-8 col-lg-6 ">
                        <a target="_top" style="font-weight: unset; color: white;" href="/content/Technology.50">Technology</a>
                        <ul id="footerSubFilesList" style="
                                        list-style: none;
                                        padding-left: 0;
                                        padding-bottom: 25px;
                                        
                                            column-count: 2;
                                        ">
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/index.xml">index</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Blob storage">Blob storage</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Blockchain">Blockchain</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Code Analysis">Code Analysis</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Containerization platforms">Containerization platforms</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Distributed coordinators">Distributed coordinators</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Distributed database architecture">Distributed database architecture</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Event stream processing">Event stream processing</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Fault tolerance">Fault tolerance</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Google">Google</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/GPU databases">GPU databases</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Hadoop">Hadoop</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Hardware">Hardware</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Internet of Things">Internet of Things</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Java">Java</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Machine Learning">Machine Learning</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Messaging">Messaging</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Microservices">Microservices</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Mobile development">Mobile development</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/NoSQL">NoSQL</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Peer-to-peer">Peer-to-peer</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Robotics">Robotics</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Search engines">Search engines</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/VLDB">VLDB</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/Web Security">Web Security</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Technology.50/XBRL">XBRL</a>
                            </li>
                        </ul>
                    </div>
                    <div style="padding-left: 0" class="
                                col-12
                                 col-sm-6 col-md-4 col-lg-3 ">
                        <a target="_top" style="font-weight: unset; color: white;" href="/content/Tutorials.100">Tutorials</a>
                        <ul id="footerSubFilesList" style="
                                        list-style: none;
                                        padding-left: 0;
                                        padding-bottom: 25px;
                                        ">
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Tutorials.100/Linux.80">Linux</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Tutorials.100/Access Control.200.xml">Access Control</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Tutorials.100/Development">Development</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Tutorials.100/Printers">Printers</a>
                            </li>
                            <li>
                                <a target="_top" style="font-weight: unset; color: rgb(192, 187, 183);" href="/content/Tutorials.100/XSL Transformation.xml">XSL Transformation</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="new-footer" style="padding: 0 50px 50px; background-color: #333;">
                <a title="DEISTER website" target="_blank" id="footerLogo" href="http://www.deister.net">&nbsp;</a>
            </div>
        </footer>
        <a id="button" />
        <script type="text/javascript"> </script>
        <script src="/static/assets/bootstrap/js/jquery-3.4.1.js?v=1545" type="text/javascript"> </script>
        <script src="https://code.jquery.com/jquery-migrate-3.1.0.js"> </script>
        <script src="/static/assets/bootstrap/js/bootstrap.js?v=1545" type="text/javascript"> </script>
        <script src="/static/assets/jquery-ui/jquery-ui.min.js?v=1545" type="text/javascript"> </script>
        <script src="/static/assets/prettify/prettify.js?v=1545" type="text/javascript"> </script>
        <script src="/static/assets/treetable/jquery.treetable.js?v=1545" type="text/javascript"> </script>
        <script src="/static/assets/clipboard/dist/clipboard.min.js?v=1545" type="text/javascript"> </script>
        <script src="/static/assets/bootstrap-validator/bootstrap-validator.min.js?v=1545" type="text/javascript"> </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js" type="text/javascript"> </script>
        <script src="/static/assets/bootstrap-treeview/bootstrap-treeview.js?v=1545" type="text/javascript"> </script>
        <script src="/static/assets/ace/ace.js?v=1545" type="text/javascript"> </script>
        <script src="/static/deister/js/deister-custom.js?v=1545" type="text/javascript"> </script>
        <script src="/static/deister/js/deister-date.js?v=1545" type="text/javascript"> </script>
        <script src="/static/deister/js/deister-prettify.js?v=1545" type="text/javascript"> </script>
        <script src="/static/deister/js/deister-treemenu.js?v=1545" type="text/javascript"> </script>
        <script src="/static/deister/js/deister-treetable.js?v=1545" type="text/javascript"> </script>
        <script src="/static/deister/js/deister-ekko-lightbox.js?v=1545" type="text/javascript"> </script>
        <script src="/static/deister/js/deister-display-locked-files.js?v=1545" type="text/javascript"> </script>
        <script type="text/javascript">

            // ===== Scroll to Top ====
            var btn = $('#button');

            $(window).scroll(function() {
            
                if ($(window).scrollTop() > 300) {
                    btn.addClass('show');
                } else {
                    btn.removeClass('show');
                }
            
            });

            btn.on('click', function(e) {
                e.preventDefault();
                $('html, body').animate({scrollTop:0}, '300');
            });


            // Check if exists some mathematic expression to define or not mathjax config
            // and stop spinner when document is fully loaded.
            </script>
        <script type="text/javascript">
            function onDocumentLoad() {

                // This two functions are used to change the icon of the buttons in the taskList table
                $(".taskList .collapse").on('show.bs.collapse', function(){
                    $("button[data-target='#"+this.id+"']").find(".fa").removeClass("fa-plus").addClass("fa-minus");
                });
                $(".taskList .collapse").on('hide.bs.collapse', function(){
                    $("button[data-target='#"+this.id+"']").find(".fa").removeClass("fa-minus").addClass("fa-plus");
                });

            

                $(".edit-section").on("click",function() {
                    var editLnk = $(this).data("href");

                    $.get("/rest/admin/islocked/Databases.30/Redis/index.xml").done(function(rs) {
                        var numFiles = rs.rowset.length;

                        if(numFiles === 0)
                            window.location = editLnk;
                        else
                            displayLockedFiles(rs, "editsection", editLnk);
                    }).fail(function() {
                        alert("Something went wrong. Refresh window and if the problem persists contact us.");
                        return false;
                    });
                });

                // Set class for table inside DIV to set the class for the table.
				$('div.external-object-info table').each(
					function() {
						$(this).addClass("table table-bordered table-sm table-striped");
					}
				);

                /*
                 * PATCH for index.xml files opened in FireFox: FF doesn't allow to point anchors (document right menu)
                 * from iframe url because of security reasons.
                 * Implement the scroll link with JS for FF only and index.xml files.
                 */

                if (
                    navigator.userAgent.toLowerCase().indexOf('firefox') !== -1 &&
                    urlUtils.getSanitizedPathName().endsWith("index.xml")
                ) {
                    var rightMenuLinks = document.querySelectorAll(".doc-section-menu-link");
                    if (rightMenuLinks) {
                        for (var idx = 0; rightMenuLinks.length > idx; idx++) {
                            var menuLink = rightMenuLinks[idx];

                            menuLink.addEventListener("click", function(evt) {
                                evt.preventDefault();
                                var targetLink = document.querySelector("[data-ref='" + this.getAttribute("data-href") + "']");
                                if (targetLink)
                                    targetLink.scrollIntoView();
                            })
                        }
                    }
                }

                
                    stopSpinner();
                

                // Table hetmap
                var tableList = document.querySelectorAll('.table-heatmap > table');
                $.each(tableList, function(idx, tableEl) {
                    console.log(arguments);
                    deisterTableHeatmap(tableEl, 0 /*inirow*/, 0 /*inicol*/, ".", ",", false /*inverted*/, false /*contrast*/);
                });

                tableList = document.querySelectorAll('.table-heatmap-inverted > table');
                $.each(tableList, function(idx, tableEl) {
                    console.log(arguments);
                    deisterTableHeatmap(tableEl, 0 /*inirow*/, 0 /*inicol*/, ".", ",", true /*inverted*/, false /*contrast*/);
                });
            }

            </script>
    </body>
</html>
